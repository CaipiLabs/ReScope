/*!
 * MIT License
 * 
 * Copyright (c) 2018 Wise Wild Web
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
module.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=18)}([function(t,e){t.exports=require("is")},function(t,e){t.exports=require("@babel/runtime/helpers/toConsumableArray")},function(t,e){t.exports=require("@babel/runtime/helpers/objectSpread")},function(t,e,s){"use strict";s.r(e),s.d(e,"walknSet",function(){return a}),s.d(e,"walknGet",function(){return o}),s.d(e,"keyWalknSet",function(){return h}),s.d(e,"keyWalknGet",function(){return u});var i=s(1),n=s.n(i),r=s(17);function a(t,e,s,i){return r.string(e)&&(e=e.split(".")),!!e.length&&(1==e.length?t[e[0]]=i?[].concat(n()(t[e[0]]||[]),[s]):s:a(t[e[0]]=t[e[0]]||{},e.slice(1),s,i))}function o(t,e,s){return r.string(e)&&(e=e.split(".")),e.length?t[e[0]]&&o(t[e[0]],e.slice(1)):t}function h(t,e,s,i){return r.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),a(t,e,s)}function u(t,e,s){return r.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),e.length?t[e[0]]&&o(t[e[0]],e.slice(1)):t}},function(t,e){t.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(t,e){t.exports=require("@babel/runtime/helpers/defineProperty")},function(t,e){t.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s.n(i),r=s(1),a=s.n(r),o=s(5),h=s.n(o),u=s(8),l=s.n(u),c=s(10),f=s.n(c),p=s(6),_=s.n(p),d=s(4),v=s.n(d),y=s(7),b=s.n(y),g=s(13),m=s.n(g),k=s(0),S=s.n(k),w=s(14),T=s.n(w),O=s(15),j=s(3),C=function(t,e,s){var i=function(){};i.prototype=s?new s._[e]:t[e]||{},t[e]=new i,t._[e]=i},x={},E=function(t){function e(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.parent,r=i.upperScope,a=i.key,o=i.id,h=i.snapshot,u=i.state,c=i.data,p=i.incrementId,d=void 0===p?!!a:p,y=i.persistenceTm,b=i.autoDestroy,g=i.rootEmitter,m=i.boundedActions;l()(this,e),s=f()(this,_()(e).call(this));var k={keyPID:r&&r._id||n&&n._id||T.a.generate(),key:a,incrementId:d,baseId:o};if(o=o||a&&k.keyPID+">"+a,k.isLocalId=!o,o=o||"_____"+T.a.generate(),x[o]&&!d)return s._id=o,x[o].register(t),f()(s,x[o]);if(x[o]&&d){for(var w=-1;x[o+"["+ ++w+"]"];);o=o+"["+w+"]"}if(x[o]=v()(s),s._id=o,s._rev=0,s._=k,s.actions={},s.stores={},s.state={},s.data={},s.parent=n,"inherit"==b&&(b=n&&n._autoDestroy),s._autoDestroy=b,k.persistenceTm=y||s.constructor.persistenceTm,n&&n.dead)throw new Error("Can't use a dead scope as parent !");return C(v()(s),"actions",n),C(v()(s),"stores",n),C(v()(s),"state",n),C(v()(s),"data",n),s.sources=[],k.childScopes=[],k.childScopesList=[],k.unStableChilds=0,k.seenChilds=0,k._listening={},k._scope={},k._mixed=[],k._mixedList=[],k.followers=[],s.__retains={all:0},s.__locks={all:1},k._boundedActions=S.a.array(m)?{test:m.includes.bind(m)}:m,n&&(n.retain("isMyParent"),g?n.on(k._parentList={update:function(t){return s._propag()}}):(!n._stable&&s.wait("waitingParent"),n.on(k._parentList={stable:function(t){return s.release("waitingParent")},unstable:function(t){return s.wait("waitingParent")},update:function(t){return s._propag()}}))),s.register(t,u,c),s.__locks.all--,s._stable=!s.__locks.all,n&&n._addChild(v()(s)),s.restore(h),b&&setTimeout(function(t){s.retain("autoDestroy"),s.dispose("autoDestroy")}),s}return m()(e,t),b()(e,null,[{key:"stateMapToRefList",value:function(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object.keys(t).forEach(function(o){var h=a?a+"."+o:o;t[o]instanceof e.scopeRef?n.push(t[o].path+":"+h):t[o]&&t[o]instanceof Function?"$apply"==o?s=t[o]:r[o]=t[o]:t[o]&&t[o].prototype instanceof e.Store?n.push(t[o].as(h)):i[h]=t[o]}),s}},{key:"getScope",value:function(t){var s=S.a.array(t)?t.sort(function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0}).join("+"):t;return x[s]=x[s]||new e({},{id:s})}}]),b()(e,[{key:"mount",value:function(t,e,s,i){var n=this;return S.a.array(t)?t.forEach(function(t){return n._mount(t,e,s,i)}):this._mount.apply(this,arguments),this}},{key:"_mount",value:function(t,s,i,n){var r;if(r=this.parseRef(t),"$parent"!=t){if(!this._._scope[r.storeId]){var a;if(this._._mixed.reduceRight(function(e,r){return e||r._mount(t,s,i,n)},!1)||!this.parent)return;return(a=this.parent)._mount.apply(a,arguments)}var o=this._._scope[r.storeId],h=[];if(e.isStoreClass(o))for(this._._scope[r.storeId]=new o(this,{name:r.storeId,state:i,data:n},h);h.length;)h.shift()();else e.isScopeClass(o)&&(o=this._._scope[r.storeId]=new o({$parent:this},{key:r.storeId,incrementId:!0,upperScope:this}),r.path.length>1&&this._._scope[r.storeId].mount(r.path.slice(1).join("."),s,i,n));return e.isStore(o)&&(void 0!==i&&void 0===n?o.setState(i):void 0!==i&&(o.state=i),void 0!==n&&o.push(n)),this._watchStore(r.storeId),this._._scope[r.storeId]}}},{key:"_watchStore",value:function(t){var e=this;return this._._listening[t]||S.a.fn(this._._scope[t])||(!this._._scope[t]._autoDestroy&&this._._scope[t].retain("scoped"),!this._._scope[t].isStable()&&this.wait(t),this._._scope[t].on(this._._listening[t]={destroy:function(s){delete e._._listening[t],e._._scope[t]=e._._scope[t].constructor},update:function(t){return e.propag()},stable:function(s){return e.release(t)},unstable:function(s){return e.wait(t)}})),!0}},{key:"mixin",value:function(t){var e,s=this,i=this.parent;this._._mixed.push(t),t.retain("mixedTo"),t._stable||this.wait(t._id),this._._mixedList.push(e={stable:function(e){return s.release(t._id)},unstable:function(e){return s.wait(t._id)},update:function(t){return s._propag()}}),t.on(e),C(this,"actions",i),C(this,"stores",i),C(this,"state",i),C(this,"data",i),this.relink(this._._scope,this,!1,!0),this._._mixed.forEach(function(t){C(s,"actions"),C(s,"stores"),C(s,"state"),C(s,"data"),s.stores.__origin="mixed "+t._id,t.relink(t._._scope,s,!0,!0)})}},{key:"register",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.relink(t,this,!1,!1),Object.keys(t).forEach(function(n){"$parent"!=n&&(t[n].singleton||S.a.fn(t[n])&&(s[n]||i[n])?e._mount(n,void 0,s[n],i[n]):s[n]||i[n]?i[n]?(s[n]&&(e.stores[n].state=s[n]),e.stores[n].push(i[n])):s[n]&&e.stores[n].setState(s[n]):e._watchStore(n))})}},{key:"relink",value:function(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;Object.keys(t).forEach(function(a){var o;if(!(!r&&i._._scope[a]===t[a]||i._._scope[a]&&i._._scope[a].constructor===t[a])){if(!r&&i._._scope[a]){if(!n&&!S.a.fn(i._._scope[a])){console.info("Rescope Store : ",a," already exist in this scope ! ( Hot switching the store ) !!!");var h=i._._scope[a];i._._scope[a]=t[a],o=h.nextState,h.destroy()}!n&&S.a.fn(i._._scope[a])&&(i._._scope[a]=t[a])}else r||n||(s._._scope[a]=t[a]);if(Object.defineProperty(i._.stores.prototype,a,{enumerable:!0,configurable:!0,get:function(){return s._._scope[a]}}),"$parent"!==a){Object.defineProperty(i._.state.prototype,a,{enumerable:!0,configurable:!0,get:function(){return s._._scope[a]&&s._._scope[a].state},set:function(t){return s._mount(a,void 0,t)}}),Object.defineProperty(i._.data.prototype,a,{enumerable:!0,configurable:!0,get:function(){return s._._scope[a]&&s._._scope[a].data},set:function(t){return s._mount(a,void 0,void 0,t)}});var u=t[a]instanceof e.Store?t[a].constructor.actions:t[a].actions,l=i._.actions.prototype;e.isScope(s._._scope[a].prototype)&&s._mount(a),e.isScope(s._._scope[a])&&(l[a]=s._._scope[a].actions),(e.isStore(s._._scope[a])||e.isStoreClass(s._._scope[a]))&&(u&&Object.keys(u).forEach(function(t){l.hasOwnProperty(t)?l[t].__targetStores++:(l[t]=s.dispatch.bind(s,t),l[t].__targetStores=1)}),o&&s._mount(a,null,o))}}})}},{key:"bind",value:function(t,e,s){var i,n,r,a=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e&&!S.a.array(e)&&(e=[e]),!1!==s&&!0!==s||(o=s,s=null),r=e.map(function(t){return S.a.string(t)?t:t.name}).map(function(t){return a.parseRef(t)}),this._.followers.push([t,e,s||void 0,i=r.reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},u)]),this.mount(e),this.retainStores(Object.keys(i),"listeners"),o&&this._stable){if(!(n=this.getUpdates(i)))return this;"function"!=typeof t?s?t.setState(h()({},s,n)):t.setState(n):t(n)}return this}},{key:"unBind",value:function(t,e,s){for(var i=this._.followers,n=i&&i.length;i&&n--;)if(i[n][0]===t&&""+i[n][1]==""+e&&i[n][2]==s)return this.disposeStores(Object.keys(i[n][3]),"listeners"),i.splice(n,1)}},{key:"map",value:function(t,e){var s=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,r=this.constructor.Store,a=(e=S.a.array(e)?e:[e]).map(this.parseRef);if(this.mount(e),i&&t instanceof r)r.map(t,e,this,this,!1);else if(i){this.bind(t,e,void 0,!1);var o,h=t.isReactComponent?"componentWillUnmount":"destroy";t.hasOwnProperty(h)&&(o=t[h]),t[h]=function(){return delete t[h],o&&(t[h]=o),s.unBind(t,e),t[h]&&t[h].apply(t,arguments)}}return n&&this.getUpdates(n)||a.reduce(function(t,e){return Object(j.walknSet)(t,e.alias||e.path,s.retrieve(e.path)),t},{})}},{key:"retrieve",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=S.a.string(t)?t.split("."):t)&&this.stores[t[0]]&&this.stores[t[0]].retrieve&&this.stores[t[0]].retrieve(t.slice(1))}},{key:"restoreRefPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=S.a.string(t)?t.split("."):t;for(var s,i=0,n=this;i<t.length;){if(s=n.stores[t[i]],(e.isScopeClass(s)||e.isStoreClass(s))&&(n.mount(t[0]),s=n.stores[t[i]]),!e.isScope(s)){if(e.isStore(s)){s.restore();break}break}n=s,i++}}},{key:"retrieveStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=S.a.string(t)?t.split("."):t)&&t.length&&(1!=t.length&&this.stores[t[0]].retrieveStore?this.stores[t[0]].retrieveStore(t.slice(1)):1==t.length&&this.stores[t[0]])}},{key:"getStoresRevs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,s=this._._scope;return t||(t={}),Object.keys(s).forEach(function(e){"$parent"!=e&&(S.a.fn(s[e])?t.hasOwnProperty(e)||(t[e]=!1):t[e]=s[e]._rev)}),e||(this._._mixed.reduce(function(e,s){return s.getStoresRevs(t),t},t),this.parent&&this.parent.getStoresRevs(t)),t}},{key:"getRefsUpdates",value:function(t,e,s){var i=this;return e=e||t.map(function(t){return S.a.string(t)?t:t.name}).map(function(t){return i.parseRef(t)}).reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},{}),this.getUpdates(e,s)}},{key:"getUpdates",value:function(t,e,s){var i=this;return e=e||{},t=t||this._getRevMap(),Object.keys(t).forEach(function(n){var r=i.stores[n];t[n]=t[n]||{rev:0,refs:[]},r&&S.a.fn(r)?(s=!0,e[n]=void 0):r&&r._rev>t[n].rev&&(t[n].rev=r._rev,s=!0,t[n].refs.forEach(function(t){e[t.alias]=i.retrieve(t.path)}))}),s&&e}},{key:"_getRevMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._._scope;return Object.keys(e).forEach(function(s){"$parent"==s||t[s]||(t[s]={rev:e[s]._rev,refs:[]})}),this._._mixed.reduceRight(function(t,e){return e._getRevMap(t)},t),this.parent&&this.parent._getRevMap(t),t}},{key:"_getAllChilds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.push.apply(t,a()(this._.childScopes)),this._.childScopes.forEach(function(e){e._getAllChilds(t)}),t}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(this._._scope,this._),i=s.baseId,n=s.key,r=s.keyPID,a=(s.incrementId,t.alias),o=t.parentAlias,h=n?(o||r)+">"+n:a||o&&o+"/"+i||this._id;return this.serialize_ex(t,e,h,a,["$parent"])}},{key:"serialize_ex",value:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,h=this._._scope,u=this._,l=(u.baseId,u.key,u.keyPID,u.incrementId),c=s.withChilds,f=void 0===c||c,p=(s.withParents,s.withMixed),_=void 0===p||p,d=s.norefs;s.parentAlias,s.aliases;if(Object(j.keyWalknGet)(i,r)){if(!l)return i;if(l){for(var v=-1;Object(j.keyWalknGet)(i,r+"["+ ++v+"]"););r=r+"["+v+"]"}}return Object(j.keyWalknSet)(i,r,{}),Object.keys(h).forEach(function(t){o.includes(t)||e.isStoreClass(h[t])||e.isScopeClass(h[t])||h[t].serialize(n()({},s,{parentAlias:r}),i)}),f&&this._.childScopes.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!0,withParents:!1,parentAlias:r,withMixed:_,norefs:d},i)}),_&&this._._mixed.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!1,withParents:!1,withMixed:_,norefs:d},i)}),a&&(i=Object.keys(i).reduce(function(e,s){return e[s===t._id?a:s]=i[s],e},{})),i}},{key:"restore",value:function(t){var e,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.a.bool(i)&&i,a=this._._scope;t&&i&&i.alias&&i.alias!=this._id&&(delete(e=n()({},t,h()({},this._id,t[i.alias])))[i.alias],t=e),(t=t&&Object(j.keyWalknGet)(t,this._id)||this.takeSnapshotByKey(this._id))&&(this._.snapshot=n()({},t),e=t["/"],t["/"]=n()({},e),e&&Object.keys(e).forEach(function(t){"$parent"!=t&&a[t]&&(r&&!S.a.fn(a[t])&&a[t].destroy(),s._mount(t))}),this._._mixed.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}),this._.childScopes.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}))}},{key:"getSnapshotByKey",value:function(t,e){return this._.snapshot&&t.startsWith(this._id)?Object(j.keyWalknGet)(this._.snapshot,t.substr(this._id.length)):!e&&this.parent&&this.parent.getSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.getSnapshotByKey(t)}},{key:"getSnapshotByKeyExt",value:function(t,e,s){if(t)return Object(j.keyWalknGet)(t,e)}},{key:"takeSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var s=Object(j.keyWalknGet)(this._.snapshot,t.substr(this._id.length));return s&&this.deleteSnapshotByKey(t,!0),s}return!e&&this.parent&&this.parent.takeSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.takeSnapshotByKey(t)}},{key:"deleteSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var s=Object(j.keyWalknGet)(this._.snapshot,t.substr(this._id.length).replace(/^(.*[\>|\/])[^\>|\/]+$/gi,"$1"));s&&delete s[t.replace(/^.*[\>|\/]([^\>|\/]+)$/gi,"$1")]}return!e&&this.parent&&this.parent.deleteSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.deleteSnapshotByKey(t)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(s){return e.state[s]=t[s]})}},{key:"parseRef",value:function(t){"string"!=typeof t&&(this.register(h()({},t.name,t.store)),t=t.name);var e=t.split(":");return e[0]=e[0].split("."),{storeId:e[0][0],path:e[0],alias:e[1]||e[0][e[0].length-1],ref:t}}},{key:"dispatch",value:function(t){for(var e,s=this,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(this.dead)console.warn("Dispatch was called on a dead scope, check you're async functions in this stack...",(new Error).stack);else{var a=this._._boundedActions;if(Object.keys(this._._scope).forEach(function(e){var i;"$parent"!=e&&(S.a.fn(s._._scope[e])||(i=s._._scope[e]).trigger.apply(i,[t].concat(n)))}),!a||!a.test(t))return this._._mixed.forEach(function(e){return e.dispatch.apply(e,[t].concat(n))}),this.parent&&(e=this.parent).dispatch.apply(e,[t].concat(n)),this}}},{key:"trigger",value:function(){this.dispatch.apply(this,arguments)}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):this.once("stable",function(s){return e.then(t)})}},{key:"onceStableTree",value:function(t){var e=this;return this._.unStableChilds?this.once("stableTree",function(s){return e.onceStableTree(t)}):t(this.data)}},{key:"retainStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;e.forEach(function(e){return t.stores[e]&&t.stores[e].retain&&t.stores[e].retain(s)})}},{key:"disposeStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;e.forEach(function(e){return t.stores[e]&&t.stores[e].dispose&&t.stores[e].dispose(s)})}},{key:"wait",value:function(t){this._stable&&!this.__locks.all&&this.emit("unstable",this),this._stable=!1,this.__locks.all++,t&&(this.__locks[t]=this.__locks[t]||0,this.__locks[t]++)}},{key:"release",value:function(t){var e=this;if(t&&(0==this.__locks[t]&&console.error("Release more than locking !",t),this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),t||0!=this.__locks.all||console.error("Release more than locking !"),this.__locks.all--,!this.__locks.all){if(this._.stabilizerTM)return;this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.stabilizerTM=setTimeout(function(t){e._.stabilizerTM=null,e.__locks.all||(e._.propagTM&&clearTimeout(e._.propagTM),e._rev++,e._stable=!0,e.emit("stable",e),!e.dead&&e._propag())})}}},{key:"propag",value:function(){var t=this;this._.propagTM&&clearTimeout(this._.propagTM),this._.propagTM=setTimeout(function(e){t._.propagTM=null,t._propag()},2)}},{key:"_propag",value:function(){var t=this;this._.followers.length&&this._.followers.forEach(function(e){var s=e[0],i=(e[1],e[2]),n=e[3],r=(e[3],t.getUpdates(n));r&&("function"!=typeof s?i?s.setState(h()({},i,r)):s.setState(r):s(r,n&&a()(n)||"no revs"))}),this.emit("update",this.getUpdates())}},{key:"isStable",value:function(){return this._stable}},{key:"isStableTree",value:function(){return!this._.unStableChilds}},{key:"_addChild",value:function(t){var e=this;this._.childScopes.push(t),this._.seenChilds++;var s={stable:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstable:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},stableTree:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstableTree:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},destroy:function(t){t._.unStableChilds&&e._.unStableChilds--,t.isStable()||e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)}},i=this._.unStableChilds;!t.isStable()&&this._.unStableChilds++,t._.unStableChilds&&this._.unStableChilds++,this._.childScopesList.push(s),!i&&this._.unStableChilds&&this.emit("unstableTree",this),t.on(s)}},{key:"_rmChild",value:function(t){var e=this._.childScopes.indexOf(t),s=this._.unStableChilds;-1!=e&&(this._.childScopes.splice(e,1),!t.isStable()&&this._.unStableChilds--,t._.unStableChilds&&this._.unStableChilds--,t.un(this._.childScopesList.splice(e,1)[0]),s&&!this._.unStableChilds&&this.emit("stableTree"))}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("Dispose more than retaining : "+t);this.__retains[t]--}if(!this.__retains.all)throw new Error("Dispose more than retaining !");this.__retains.all--,this.__retains.all||(this._.persistenceTm?(this._.destroyTM&&clearTimeout(this._.destroyTM),this._.destroyTM=setTimeout(function(t){e.then(function(t){!e.__retains.all&&!e.dead&&e.destroy()})},this._.persistenceTm)):this.then(function(t){return!e.__retains.all&&!e.dead&&e.destroy()}))}},{key:"destroy",value:function(){var t=this,e=this._._scope;for(var s in this._getAllChilds().map(function(t){return t.destroy()}),e)if(!S.a.fn(e[s])){if("$parent"==s)continue;!e[s]._autoDestroy&&e[s].dispose("scoped")}for(this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.propagTM&&clearTimeout(this._.propagTM),Object.keys(this._._listening).forEach(function(e){return"$parent"!==e&&t._._scope[e].removeListener(t._._listening[e])});this._._mixedList.length;)this._._mixed[0].removeListener(this._._mixedList.shift()),this._._mixed.shift().dispose("mixedTo");a()(this._.followers).map(function(e){return t.unBind.apply(t,a()(e))}),this._._parentList&&(this.parent._rmChild(this),this.parent.removeListener(this._._parentList),this.parent.dispose("isMyParent"),this._._parentList=null),this.dead=!0,delete x[this._id],this.emit("destroy",this)}}]),e}(O.default);E.persistenceTm=1,E.Store=null,E.scopeRef=function(t){this.path=t},E.scopes=x,E.isScope=function(t){return t instanceof E},E.isScopeClass=function(t){return E.isPrototypeOf(t)||t===E},e.default=E},function(t,e){t.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(t,e){t.exports=require("@babel/runtime/helpers/get")},function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s.d(e,"b",function(){return l}),s.d(e,"c",function(){return c});var i=s(1),n=s.n(i),r=(s(0),{}.constructor),a=[];function o(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a.push({test:t,member:s,stateScope:i,handle:e})}function h(t,e,s){for(var i=0;i<a.length;i++)if((void 0===e||e==a[i].member)&&s==a[i].stateScope&&a[i].test(t))return!0;return!1}function u(t,e,s,i){for(var r=0;r<a.length;r++){var o;if(s==a[r].member&&i==a[r].stateScope&&a[r].test(t))return(o=a[r]).handle.apply(o,[t].concat(n()(e)))}return console.warn("reScope : Unknown type",t),!1}function l(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e[0]instanceof r&&e[2]instanceof r&&e[0].hasOwnProperty(e[1])?(e[2].value=u(e[0],[],!0,!1),e[0]):h(e[0],void 0,!1)?u(e[0],e.slice(1),!1,!1):function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s[0]instanceof r&&s[2]instanceof r&&s[0].hasOwnProperty(s[1])?(s[2].value=u(s[0],e,!0,!1),s[0]):l.apply(void 0,[s[0]].concat(e))}}function c(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e[0]instanceof r&&e[2]instanceof r&&e[0].hasOwnProperty(e[1])?(e[2].value=u(e[0],[],!0,!0),e[0]):h(e[0],void 0,!0)?u(e[0],e.slice(1),!1,!0):function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s[0]instanceof r&&s[2]instanceof r&&s[0].hasOwnProperty(s[1])?(s[2].value=u(s[0],e,!0,!0),s[0]):c.apply(void 0,[s[0]].concat(e))}}},function(t,e){t.exports=require("@babel/runtime/helpers/inherits")},function(t,e){t.exports=require("shortid")},function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return c});var i=s(1),n=s.n(i),r=s(8),a=s.n(r),o=s(7),h=s.n(o),u=s(0),l=s.n(u),c=function(){function t(){a()(this,t),this._events={}}return h()(t,[{key:"on",value:function(t,e){var s=this;if(!l.a.string(t)&&t)return Object.keys(t).forEach(function(e){return s.on(e,t[e])});this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"un",value:function(t,e){var s=this;if(!l.a.string(t)&&t)return Object.keys(t).forEach(function(e){return s.un(e,t[e])});if(this._events[t]){var i=this._events[t].indexOf(e);this._events[t].splice(i,1)}}},{key:"emit",value:function(t){if(this._events[t]){for(var e=n()(this._events[t]),s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];for(var a=0;a<e.length;a++)e[a].apply(e,i)}}},{key:"addListener",value:function(){this.on.apply(this,arguments)}},{key:"removeListener",value:function(){this.un.apply(this,arguments)}},{key:"removeAllListeners",value:function(){this._events={}}},{key:"once",value:function(t,e){var s,i=this;this.on(t,s=function(){i.un(t,s),e.apply(void 0,arguments)})}}]),t}()},function(t,e,s){"use strict";var i=s(5),n=s.n(i),r=s(2),a=s.n(r),o=s(1),h=s.n(o),u=s(8),l=s.n(u),c=s(7),f=s.n(c),p=s(10),_=s.n(p),d=s(4),v=s.n(d),y=s(6),b=s.n(y),g=s(11),m=s.n(g),k=s(13),S=s.n(k),w=s(17),T=s(9),O=s(3),j=O.keyWalknSet,C=O.keyWalknGet,x=s(15),E=s(20),R=s(14),P=Object.getPrototypeOf({}),M=function(t){function e(){var t,s,i;l()(this,e),i=_()(this,b()(e).call(this));var n=Array.prototype.slice.call(arguments),r=i.constructor,a=n[0]instanceof T?n.shift():r.scope?T.getScope(r.scope):w.string(n[0])?T.getScope(n.shift()):r.staticScope,o=!n[0]||w.array(n[0])||w.string(n[0])?{}:n.shift(),u=w.array(n[0])?n.shift():null,c=o.name||r.name,f=o.use||[],p=o.apply||null,d=r.state||r.initialState||r.defaultState;return i._uid=o._uid||R.generate(),i.__retains={all:0},i.__locks={all:0},i._onStabilize=[],i._autoDestroy=!!i._persistenceTm,i._persistenceTm=o.persistenceTm||r.persistenceTm||(o.autoDestroy||r.autoDestroy)&&5,i._cfg=o,o&&o.on&&i.on(o.on),i.name=c,a.stores?(i.scopeObj=a,i.scope=a.stores):(i.scopeObj=new T(a),i.scope=a.stores),i.$scope=i.scopeObj,i.$stores=i.scopeObj.stores,i.$actions=i.scopeObj.actions,i.$dispatch=i.scopeObj.dispatch.bind(i.scopeObj),i._rev=i.constructor._rev||0,i._revs={},i.stores={},i._require=[],i._sources=[c],w.array(r.use)?i._use=[].concat(h()(f),h()((r.use||[]).map(function(t){var e=t.match(/^(\!?)([^\:]*)(?:\:(.*))?$/);if(e[1]){var s=e[2].split(".");return i._require.push(e[3]||s[s.length-1]),t.substr(1)}return t}))):i._use=[].concat(h()(f),h()(r.use?Object.keys(r.use).map(function(t){var e=t.match(/^(\!?)(.*)$/);return e[1]&&i._require.push(r.use[t]),e[2]+(!0===r.use[t]?"":":"+r.use[t])}):[])),r.require&&(t=i._require).push.apply(t,h()(r.require)),o.require&&(s=i._require).push.apply(s,h()(o.require)),i._followers=[],i._changesSW=d||{},i.state=d&&{},p&&(i.apply=p),u?u.push(i._afterConstructor.bind(v()(i))):setTimeout(i._afterConstructor.bind(v()(i))),i}return S()(e,t),f()(e,[{key:"_afterConstructor",value:function(){var t,e=this._cfg,s=this.constructor,i=(this.restore(void 0,!0),this.state),n=this.data;n?this.data=n:void 0!==s.data?this.data=a()({},s.data):e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("state")&&void 0!==e.state&&(i=a()({},i,e.state)),void 0===this.data?(i||this._use.length)&&(this._changesSW=a()({},this._changesSW,i||{},this.$scope.map(this,this._use)),this.state={},this.shouldApply(this._changesSW)&&void 0===this.data&&(this.data=this.apply(this.data,this._changesSW,this._changesSW),t=!0,this.state=this._changesSW,this._changesSW={})):(t=!0,this.state=a()({},this._changesSW,i||{},this.$scope.map(this,this._use)),this._changesSW={}),void 0===this.data&&!t||this.__locks.all?(this._stable=!1,s.managed||this.state||this._use&&this._use.length||console.warn("ReScope store '",this.name,"' have no initial data, state or use. It can't stabilize...")):(this._stable=!0,this._rev++),!this._stable&&this.emit("unstable",this.state)}},{key:"shouldPropag",value:function(t){return!0}},{key:"shouldSerialize",value:function(){return!0}},{key:"hasDataChange",value:function(t){this.constructor;var e,s=this.data;return!(e=!s&&t||s!==t)&&s&&Object.keys(s).forEach(function(i){e=e||(t?s[i]!==t[i]:s&&s[i])}),!e&&t&&Object.keys(t).forEach(function(i){e=e||(t?s[i]!==t[i]:s&&s[i])}),e}},{key:"shouldApply",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,s=this.constructor;return!!this.isComplete(e)&&(w.array(s.follow)?s.follow.reduce(function(t,s){return t||e&&e[s]},!1):!s.follow||Object.keys(s.follow).reduce(function(i,n){return i||e&&w.fn(s.follow[n])&&s.follow[n].call(t,e[n])||s.follow[n]&&e[n]!==t.state[n]},!1))}},{key:"apply",value:function(t,e,s){return e=e||this.state,this.refine?this.refine.apply(this,arguments):t&&t.__proto__===P&&e.__proto__===P?a()({},t,e):e}},{key:"stabilize",value:function(t){t&&this.once("stable",t),this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this._stabilizer||(this._stabilizer=E.pushTask(this,"pushState"))}},{key:"retrieve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data;return t=w.string(t)?t.split("."):t,s&&t&&t.length?t.length==e+1?s[t[e]]:this.retrieve(t,e+1,s[t[e]]):s}},{key:"dispatch",value:function(t){for(var e,s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];(e=this.scopeObj).dispatch.apply(e,[t].concat(i))}},{key:"trigger",value:function(t){var e=this.constructor.actions;if(e&&e[t]){for(var s,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var a=(s=e[t]).call.apply(s,[this].concat(n));a&&this.setState(a)}}},{key:"pull",value:function(t,e,s){var i=this,n=this.scopeObj.map(this,t);return e&&(this.wait(),t.forEach(function(t){return i.scope[t]&&i.wait(i.scope[t])}),this.release()),n}},{key:"push",value:function(t,e,s){if(s=!0===e?s:e,!(e=!0===e)&&!this.hasDataChange(t)){if(s&&s(),!this.__locks.all){var i=this._stable;this._stable=!0,!i&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=t,this.wait(),this.release(s)}},{key:"pushState",value:function(t){if(t||this._changesSW||!this.data){var e=this._nextState||a()({},this.state,this._changesSW||{}),s=this.apply(this.data,e,this._changesSW);if(this._stabilizer=null,this.state=e,this._changesSW=null,!t&&!this.hasDataChange(s)){if(!this.__locks.all){var i=this._stable;this._stable=!0,!i&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=s,this.wait(),this.release()}}},{key:"setState",value:function(t,e,s){var i,n=this._changesSW=this._changesSW||{};for(var r in t)(!this.state||n.hasOwnProperty(r)&&t[r]!==n[r]||t.hasOwnProperty(r)&&(t[r]!==this.state[r]||this.state[r]&&t[r]&&t[r]._rev!=this._revs[r]))&&(i=!0,this._revs[r]=t[r]&&t[r]._rev||!0,n[r]=t[r]);if(this._nextState=a()({},this.state,n),this.shouldApply(this._nextState))return s?(this.pushState(),e&&e()):i?this.stabilize(e):e&&e(),this}},{key:"setStateSync",value:function(t){var e=this._changesSW=this._changesSW||{};for(var s in t)(!this.state||t.hasOwnProperty(s)&&(t[s]!=this.state[s]||this.state[s]&&t[s]&&t[s]._rev!=this._revs[s]))&&(!0,this._revs[s]=t[s]&&t[s]._rev||!0,e[s]=t[s]);return this.shouldApply(a()({},this.state||{},e))&&this.pushState(),this.data}},{key:"as",value:function(t){return{store:this,name:t}}},{key:"on",value:function(t){var s=this;!w.string(t)&&t?Object.keys(t).forEach(function(i){return m()(b()(e.prototype),"on",s).call(s,i,t[i])}):m()(b()(e.prototype),"on",this).apply(this,arguments)}},{key:"removeListener",value:function(t){var s=this;!w.string(t)&&t?Object.keys(t).forEach(function(i){return m()(b()(e.prototype),"removeListener",s).call(s,i,t[i])}):m()(b()(e.prototype),"removeListener",this).apply(this,arguments)}},{key:"isComplete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;this.constructor;return!this._require||!this._require.length||t&&this._require.reduce(function(e,s){return e&&t[s]},!0)}},{key:"isStable",value:function(){return this._stable}},{key:"serialize",value:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.parentAlias||this.scopeObj._id,r=0,o=!s.norefs&&w.array(this._use)&&this._use.reduce(function(s,i){var n=t.$scope.parseRef(i),a=t.$stores[n.storeId];return a&&e.isStore(a)&&!a.scopeObj._.isLocalId&&(r++,s[n.alias]=n.path),s},{}),h=this.state||{};if(!this.shouldSerialize())return j(i,n+"/"+this.name,{dataRefs:s.dataRefs,refs:o}),i;var u=Object.keys(h)||[],l=u.map(function(t){return h[t]}),c=0,f=s.dataRefs||{},p=!s.norefs&&this.data&&Object.keys(this.data).reduce(function(e,s){var i=l.indexOf(t.data[s]);return-1!=i&&(c++,e[s]=u[i]),e},{}),_={dataRefs:s.dataRefs,state:h&&(s.norefs?a()({},h):Object.keys(h).reduce(function(t,e){return!o[e]&&(t[e]=h[e]),t},{})),data:(this.data&&this.data.__proto__===P?Object.keys(this.data).reduce(function(e,s){return p[s]||f[s]||(e[s]=t.data[s],c++),e},{}):(w.bool(this.data)||w.number(this.data)||w.string(this.data))&&this.data)||void 0};return o&&r&&(_.refs=o),p&&c&&(_.inRefs=p),j(i,n+"/"+this.name,_),i}},{key:"restore",value:function(t){function e(e,s){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var s=this;(t=t&&C(t,this.scopeObj._id+"/"+this.name)||this.$scope.takeSnapshotByKey(this.scopeObj._id+"/"+this.name))&&t&&(this.isStable()||e||this.then(function(){return restore(t)}),this.state=a()({},t.state),t.refs&&Object.keys(t.refs).forEach(function(e){s.state[e]=s.$scope.retrieve(t.refs[e])}),!0===t.inRefs?this.data=a()({},this.state):(this.data=t.data,t.inRefs&&Object.keys(t.inRefs).forEach(function(e){s.data[e]=s.state[t.inRefs[e]]})),t.dataRefs&&(this.data=this.data||{},Object.keys(t.dataRefs).forEach(function(e){s.$scope.restoreRefPath(t.dataRefs[e]),s.data[e]=s.$scope.retrieve(t.dataRefs[e])})))})},{key:"unBind",value:function(t,e,s){for(var i=this._followers,n=i&&i.length;i&&n--;)if(i[n][0]===t&&i[n][1]===e&&i[n][2]===s)return i.splice(n,1)}},{key:"bind",value:function(t,e){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;if(this._followers.push([t,e,i]),s&&this.data&&this._stable){var r=i?this.retrieve(i):this.data;"function"!=typeof t?e?t.setState(n()({},e,r)):t.setState(r):t(r)}}},{key:"then",value:function(t){var e=this;if(this._stable)return t(this.data);this.once("stable",function(s){return t(e.data)})}},{key:"wait",value:function(t){if("number"==typeof t)return this.__locks.all+=t;if(w.array(t))return t.map(this.wait.bind(this));this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this.__locks.all++;var e=w.string(t)?t:null;return e&&(this.__locks[e]=this.__locks[e]||0,this.__locks[e]++),t&&w.fn(t.then)&&t.then(this.release.bind(this,null)),this}},{key:"release",value:function(t,e){this.constructor;var s=this,i=this._stable;if(w.fn(t)&&(e=t,t=null),t&&(0==this.__locks[t]&&console.error("Release more than locking !",t),this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),t||0!=this.__locks.all||console.error("Release more than locking !"),!--this.__locks.all&&this.isComplete()){var r=this.shouldPropag(this.data);this._stable=!0,r&&this._rev++,r&&this._followers.length&&this._followers.forEach(function(t){var e=t[2]?s.retrieve(t[2]):s.data;"function"==typeof t[0]?t[0](e):t[0].setState(t[1]?n()({},t[1],e):e)}),!i&&this.emit("stable",this.data),r&&this.emit("update",this.data),e&&e()}else e&&this.then(e);return this}},{key:"propag",value:function(t){this.emit("update",t)}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("RS : Dispose more than retaining on store '"+this.name+"' : "+t);this.__retains[t]--}if(0==this.__retains.all)throw new Error("RS : Dispose more than retaining on store "+this.name);this.__retains.all--,this.__retains.all||(this._persistenceTm?(this._destroyTM&&clearTimeout(this._destroyTM),this._destroyTM=setTimeout(function(t){e._destroyTM=null,!e.__retains.all&&!e.dead&&e.destroy()},this._persistenceTm)):!this.__retains.all&&!this.dead&&this.destroy())}},{key:"destroy",value:function(){this.emit("destroy",this),this._stabilizer&&clearTimeout(this._stabilizer),this._followers.length&&this._followers.forEach(function(t){"function"!=typeof t[0]&&t[0].stores&&delete t[0].stores[t[1]]}),this._followers.length=0,this.constructor._rev=this.rev,this.dead=!0,this._revs=this.data=this.state=this.scope=null,this.removeAllListeners()}},{key:"nextState",get:function(){return this._changesSW&&a()({},this.state,this._changesSW)||this.state}}]),e}(x);M.follow=void 0,M.require=void 0,M.staticScope=new T({},{id:"static"}),M.state=void 0,M.persistenceTm=!1,M.as=function(t){return{store:this,name:t}},M.map=function(t,e,s,i){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t._revs||{},a=t.stores||(t.stores={}),o={};return e=w.array(e)?h()(e):[e],s=s||M.staticScope,e=e.filter(function(e){var u,l,c,f,p,_;if(!e)return console.error("Not a mappable store item '"+e+"' in "+i+" !!"),!1;if(e.store&&e.name?(c=l=e.name,p=e.store):w.fn(e)?(l=c=e.name||e.defaultName,p=e):(l=(_=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/))[1],f=_[2]&&_[2].substr(1),p=s.stores[_[1]],c=_[3]||f&&f.match(/([^\.]*)$/)[0]||_[1]),!p){var d=[];for(var v in s.stores)d.push(v);return console.error("Not a mappable store item '"+l+"/"+c+"' in "+(t.name||t)+" !!",p,_,s.stores,d),!1}if(T.isScopeClass(p)&&s._mount(l),T.isScope(p))p=s._mount(e);else if(r[l])return!1;return w.fn(p)?(s._mount(l),s.stores[l].bind(t,c,n,f)):p.bind(t,c,n,f),s.stores[l]._sources&&(u=t._sources).push.apply(u,h()(s.stores[l]._sources)),r[c]=r[c]||!0,!a[l]&&(a[l]=s.stores[l]),s.stores[l].hasOwnProperty("data")&&(o[l]=s.data[l]),!0}),t.once("destroy",function(){e.map(function(e){var i,n,r,a;e.store&&e.name?(n=i=e.name,a=e.store):w.fn(e)?(i=n=e.name||e.defaultName,a=s.stores[i]):(i=(e=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/))[1],r=e[2]&&e[2].substr(1),a=s.stores[e[1]],n=e[3]||r&&r.match(/([^\.]*)$/)[0]||e[1]),a&&!w.fn(a)&&a.unBind(t,n,r)})}),o},M.isStore=T.isStore=function(t){return t instanceof M},M.isStoreClass=T.isStoreClass=function(t){return M.isPrototypeOf(t)||t===M},e.a=M},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s.n(i),r=s(0),a=s.n(r);e.default=n()({},a.a)},function(t,e,s){"use strict";s.r(e),function(t){var i=s(9),n=s(16),r=s(12),a="undefined"!=typeof window?window:t,o=a.___rescope||{};a.___rescope?console.warn("ReScope is defined multiple times !! \nCheck you're packaging"):(a.___rescope=o,i.default.Store=n.a,o.Scope=i.default,o.Context=i.default,o.Store=n.a,o.reScope=r.b,o.scopeToState=r.c,o.reScopeState=r.c,o.addScopableType=r.a,o.scopeRef=function(t,e){return t[e]=new i.default.scopeRef(t[e]),t}),e.default=o}.call(this,s(19))},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";s.r(e),function(t){s(0);var i,n,r=[],a=0,o=0,h=0,u={lastError:null,dispatch:function(t){u.disable(),i&&i[0].handleError?i[0].handleError(t,i):i&&console.error("ReScope : An apply task has failed !!",i[1]," on ",i[0].name||i[0].constructor.name),n=!1,i=null,l()},enable:"undefined"!=typeof window?function(){window.addEventListener("error",u.dispatch)}:function(){t.on("uncaughtException",u.dispatch)},disable:"undefined"!=typeof window?function(){window.removeEventListener("error",u.dispatch)}:function(){t.removeListener("uncaughtException",u.dispatch)}};function l(){n||function(){Date.now();n=!0,u.enable();for(;h;){for(;!r[a]||!r[a].length;)a++;h--,(i=r[a].shift())[0][i[1]].apply(i[0],i[2])}i=void 0,u.disable(),n=!1,h&&setTimeout(l)}()}e.default={pushTask:function(t,e,s){var i=t._sources&&t._sources.length||1,n=r[i]=r[i]||[];return o=Math.max(o,i),a=Math.min(a,i),h++,n.push([t,e,s]),setTimeout(l,0),n.length}}}.call(this,s(21))},function(t,e){var s,i,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&p())}function p(){if(!l){var t=o(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function d(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];u.push(new _(t,e)),1!==u.length||l||o(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}]);
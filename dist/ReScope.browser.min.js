!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),o=i(s),a=n(8),u=i(a),l="undefined"!=typeof window?window:r,c=l.___rescope||{};l.___rescope||(l.___rescope=c,o.default.Store=u.default,c.Scope=o.default,c.Store=u.default,c.scopeRef=function(t,e){return t[e]=new o.default.scopeRef(t[e]),t}),e.default=c,t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,s=r.toString;"function"==typeof Symbol&&(n=Symbol.prototype.valueOf);var o=function(t){return t!==t},a={boolean:1,number:1,string:1,undefined:1},u=/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/,l=/^[A-Fa-f0-9]+$/,c={};c.a=c.type=function(t,e){return typeof t===e},c.defined=function(t){return"undefined"!=typeof t},c.empty=function(t){var e,n=s.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(i.call(t,e))return!1;return!0}return!t},c.equal=function(t,e){if(t===e)return!0;var n,r=s.call(t);if(r!==s.call(e))return!1;if("[object Object]"===r){for(n in t)if(!(c.equal(t[n],e[n])&&n in e))return!1;for(n in e)if(!(c.equal(t[n],e[n])&&n in t))return!1;return!0}if("[object Array]"===r){if(n=t.length,n!==e.length)return!1;for(;n--;)if(!c.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===r?t.prototype===e.prototype:"[object Date]"===r&&t.getTime()===e.getTime()},c.hosted=function(t,e){var n=typeof e[t];return"object"===n?!!e[t]:!a[n]},c.instance=c.instanceof=function(t,e){return t instanceof e},c.nil=c.null=function(t){return null===t},c.undef=c.undefined=function(t){return"undefined"==typeof t},c.args=c.arguments=function(t){var e="[object Arguments]"===s.call(t),n=!c.array(t)&&c.arraylike(t)&&c.object(t)&&c.fn(t.callee);return e||n},c.array=Array.isArray||function(t){return"[object Array]"===s.call(t)},c.args.empty=function(t){return c.args(t)&&0===t.length},c.array.empty=function(t){return c.array(t)&&0===t.length},c.arraylike=function(t){return!!t&&!c.bool(t)&&i.call(t,"length")&&isFinite(t.length)&&c.number(t.length)&&t.length>=0},c.bool=c.boolean=function(t){return"[object Boolean]"===s.call(t)},c.false=function(t){return c.bool(t)&&Boolean(Number(t))===!1},c.true=function(t){return c.bool(t)&&Boolean(Number(t))===!0},c.date=function(t){return"[object Date]"===s.call(t)},c.date.valid=function(t){return c.date(t)&&!isNaN(Number(t))},c.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},c.error=function(t){return"[object Error]"===s.call(t)},c.fn=c.function=function(t){var e="undefined"!=typeof window&&t===window.alert;if(e)return!0;var n=s.call(t);return"[object Function]"===n||"[object GeneratorFunction]"===n||"[object AsyncFunction]"===n},c.number=function(t){return"[object Number]"===s.call(t)},c.infinite=function(t){return t===1/0||t===-(1/0)},c.decimal=function(t){return c.number(t)&&!o(t)&&!c.infinite(t)&&t%1!==0},c.divisibleBy=function(t,e){var n=c.infinite(t),r=c.infinite(e),i=c.number(t)&&!o(t)&&c.number(e)&&!o(e)&&0!==e;return n||r||i&&t%e===0},c.integer=c.int=function(t){return c.number(t)&&!o(t)&&t%1===0},c.maximum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t<e[n])return!1;return!0},c.minimum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t>e[n])return!1;return!0},c.nan=function(t){return!c.number(t)||t!==t},c.even=function(t){return c.infinite(t)||c.number(t)&&t===t&&t%2===0},c.odd=function(t){return c.infinite(t)||c.number(t)&&t===t&&t%2!==0},c.ge=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t>=e},c.gt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t>e},c.le=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<=e},c.lt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<e},c.within=function(t,e,n){if(o(t)||o(e)||o(n))throw new TypeError("NaN is not a valid value");if(!c.number(t)||!c.number(e)||!c.number(n))throw new TypeError("all arguments must be numbers");var r=c.infinite(t)||c.infinite(e)||c.infinite(n);return r||t>=e&&t<=n},c.object=function(t){return"[object Object]"===s.call(t)},c.primitive=function(t){return!t||!("object"==typeof t||c.object(t)||c.fn(t)||c.array(t))},c.hash=function(t){return c.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},c.regexp=function(t){return"[object RegExp]"===s.call(t)},c.string=function(t){return"[object String]"===s.call(t)},c.base64=function(t){return c.string(t)&&(!t.length||u.test(t))},c.hex=function(t){return c.string(t)&&(!t.length||l.test(t))},c.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===s.call(t)&&"symbol"==typeof n.call(t)},t.exports=c},function(t,e,n){"use strict";function r(){f=!1}function i(t){if(!t)return void(c!==d&&(c=d,r()));if(t!==c){if(t.length!==d.length)throw new Error("Custom alphabet for shortid must be "+d.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,n){return e!==n.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+d.length+" unique characters. These characters were not unique: "+e.join(", "));c=t,r()}}function s(t){return i(t),c}function o(t){p.seed(t),h!==t&&(r(),h=t)}function a(){c||i(d);for(var t,e=c.split(""),n=[],r=p.nextValue();e.length>0;)r=p.nextValue(),t=Math.floor(r*e.length),n.push(e.splice(t,1)[0]);return n.join("")}function u(){return f?f:f=a()}function l(t){var e=u();return e[t]}var c,h,f,p=n(16),d="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={characters:s,seed:o,lookup:l,shuffled:u}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=n(1),f=r(h),p=n(6),d=r(p),_=n(4),v=r(_),y=n(5),b=function(t,e,n){var r=function(){};r.prototype=n?new n._[e]:t[e]||{},t[e]=new r,t._[e]=r},g={},m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.parent,i=n.upperScope,s=n.key,u=n.id,l=n.snapshot,c=n.state,h=n.data,p=n.incrementId,_=void 0===p?!!s:p,v=n.persistenceTm,y=n.autoDestroy,m=n.rootEmitter,k=n.boundedActions;o(this,e);var S=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),w={keyPID:i&&i._id||r&&r._id||d.default.generate(),key:s,incrementId:_,baseId:u};if(u=u||s&&w.keyPID+">"+s,w.isLocalId=!u,u=u||"_____"+d.default.generate(),g[u]&&!_){var O;return S._id=u,g[u].register(t),O=g[u],a(S,O)}if(g[u]&&_){for(var j=-1;g[u+"["+ ++j+"]"];);u=u+"["+j+"]"}if(g[u]=S,S._id=u,S._rev=0,S._=w,S.actions={},S.stores={},S.state={},S.data={},S.parent=r,"inherit"==y&&(y=r&&r._autoDestroy),S._autoDestroy=y,w.persistenceTm=v||S.constructor.persistenceTm,r&&r.dead)throw new Error("Can't use a dead scope as parent !");return b(S,"actions",r),b(S,"stores",r),b(S,"state",r),b(S,"data",r),S.sources=[],w.childScopes=[],w.childScopesList=[],w.unStableChilds=0,w.seenChilds=0,w._listening={},w._scope={},w._mixed=[],w._mixedList=[],w.followers=[],S.__retains={all:0},S.__locks={all:1},w._boundedActions=f.default.array(k)?{test:k.includes.bind(k)}:k,r&&(r.retain("isMyParent"),m?r.on(w._parentList={update:function(t){return S._propag()}}):(!r._stable&&S.wait("waitingParent"),r.on(w._parentList={stable:function(t){return S.release("waitingParent")},unstable:function(t){return S.wait("waitingParent")},update:function(t){return S._propag()}}))),S.register(t,c,h),S.__locks.all--,S._stable=!S.__locks.all,r&&r._addChild(S),S.restore(l),y&&setTimeout(function(t){S.retain("autoDestroy"),S.dispose("autoDestroy")}),S}return u(e,t),c(e,null,[{key:"stateMapToRefList",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=void 0;return Object.keys(t).forEach(function(a){var u=s?s+"."+a:a;t[a]instanceof e.scopeRef?r.push(t[a].path+":"+u):t[a]&&t[a]instanceof Function?"$apply"==a?o=t[a]:i[a]=t[a]:t[a]&&t[a].prototype instanceof e.Store?r.push(t[a].as(u)):n[u]=t[a]}),o}},{key:"getScope",value:function(t){var n=f.default.array(t)?t.sort(function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0}).join("+"):t;return g[n]=g[n]||new e({},{id:n})}}]),c(e,[{key:"mount",value:function(t,e,n,r){var i=this;return f.default.array(t)?t.forEach(function(t){return i._mount(t,e,n,r)}):this._mount.apply(this,arguments),this}},{key:"_mount",value:function(t,n,r,i){var s=void 0,o=this._;if(s=this.parseRef(t),"$parent"!=t){if(!o._scope[s.storeId]){var a;if(o._mixed.reduceRight(function(e,s){return e||s._mount(t,n,r,i)},!1)||!this.parent)return;return(a=this.parent)._mount.apply(a,arguments)}var u=o._scope[s.storeId],l=[];if(e.isStoreClass(u))for(o._scope[s.storeId]=new u(this,{name:s.storeId,state:r,data:i},l);l.length;)l.shift()();else e.isScopeClass(u)&&(u=o._scope[s.storeId]=new u({$parent:this},{key:s.storeId,incrementId:!0,upperScope:this}),s.path.length>1&&o._scope[s.storeId].mount(s.path.slice(1).join("."),n,r,i));return e.isStore(u)&&(void 0!==r&&void 0===i?u.setState(r):void 0!==r&&(u.state=r),void 0!==i&&u.push(i)),e.isScope(u)&&void 0!==r&&u.setState(r),this._watchStore(s.storeId),o._scope[s.storeId]}}},{key:"register",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.relink(t,this,!1,!1),Object.keys(t).forEach(function(i){"$parent"!=i&&(t[i].singleton||f.default.fn(t[i])&&(n[i]||r[i])?e._mount(i,void 0,n[i],r[i]):n[i]||r[i]?r[i]?(n[i]&&(e.stores[i].state=n[i]),e.stores[i].push(r[i])):n[i]&&e.stores[i].setState(n[i]):e._watchStore(i))})}},{key:"relink",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=this,i=arguments[2],s=arguments[3],o=this._;Object.keys(t).forEach(function(a){var u=void 0,l=void 0,c=void 0;if(!(!s&&n._._scope[a]===t[a]||n._._scope[a]&&n._._scope[a].constructor===t[a])){if(!s&&n._._scope[a]){if(!i&&!f.default.fn(n._._scope[a])){var h=n._._scope[a];n._._scope[a]=t[a],u=h.nextState,h.destroy()}!i&&f.default.fn(n._._scope[a])&&(n._._scope[a]=t[a])}else s||i||(o._scope[a]=t[a]);if(Object.defineProperty(n._.stores.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]}}),c=n._.actions.prototype,"$parent"!==a){if(Object.defineProperty(n._.state.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]&&o._scope[a].state},set:function(t){return r._mount(a,void 0,t)}}),Object.defineProperty(n._.data.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]&&o._scope[a].data},set:function(t){return r._mount(a,void 0,void 0,t)}}),l=t[a]instanceof e.Store?t[a].constructor.actions:t[a].actions,e.isScopeClass(o._scope[a])&&r._mount(a),e.isScope(o._scope[a]))c[a]=o._scope[a].actions;else if(!e.isStore(o._scope[a])&&!e.isStoreClass(o._scope[a]))return;l&&Object.keys(l).forEach(function(t){c.hasOwnProperty(t)?c[t].__targetStores++:(c[t]=r.dispatch.bind(r,t),c[t].__targetStores=1)})}else c[a]=t[a].actions;u&&r._mount(a,null,u)}})}},{key:"_watchStore",value:function(t){var e=this,n=this._;return n._listening[t]||f.default.fn(n._scope[t])||(!n._scope[t]._autoDestroy&&n._scope[t].retain("scoped"),!n._scope[t].isStable()&&this.wait(t),n._scope[t].on(n._listening[t]={destroy:function(e){delete n._listening[t],n._scope[t]=n._scope[t].constructor},update:function(t){return e.propag()},stable:function(n){return e.release(t)},unstable:function(n){return e.wait(t)}})),!0}},{key:"mixin",value:function(t){var e=this,n=this.parent,r=void 0,i=this._;i._mixed.push(t),t.retain("mixedTo"),t._stable||this.wait(t._id),i._mixedList.push(r={stable:function(n){return e.release(t._id)},unstable:function(n){return e.wait(t._id)},update:function(t){return e._propag()}}),t.on(r),b(this,"actions",n),b(this,"stores",n),b(this,"state",n),b(this,"data",n),this.relink(i._scope,this,!1,!0),i._mixed.forEach(function(t){b(e,"actions"),b(e,"stores"),b(e,"state"),b(e,"data"),e.stores.__origin="mixed "+t._id,t.relink(t._._scope,e,!0,!0)})}},{key:"bind",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=void 0,u=void 0,l=void 0;if(e&&!f.default.array(e)&&(e=[e]),n!==!1&&n!==!0||(i=n,n=null),l=e.map(function(t){return f.default.string(t)?t:t.name}).map(function(t){return r.parseRef(t)}),this._.followers.push([t,e,n||void 0,a=l.reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},o)]),this.mount(e),this.retainStores(Object.keys(a),"listeners"),i&&this._stable){if(u=this.getUpdates(a),!u)return this;"function"!=typeof t?n?t.setState(s({},n,u)):t.setState(u):t(u)}return this}},{key:"unBind",value:function(t,e,n){for(var r=this._.followers,i=r&&r.length;r&&i--;)if(r[i][0]===t&&""+r[i][1]==""+e&&r[i][2]==n)return this.disposeStores(Object.keys(r[i][3]),"listeners"),r.splice(i,1)}},{key:"map",value:function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],s=this.constructor.Store;e=f.default.array(e)?e:[e];var o=e.map(this.parseRef);if(this.mount(e),r&&t instanceof s)s.map(t,e,this,this,!1);else if(r){this.bind(t,e,void 0,!1);var a=void 0,u=t.isReactComponent?"componentWillUnmount":"destroy";t.hasOwnProperty(u)&&(a=t[u]),t[u]=function(){return delete t[u],a&&(t[u]=a),n.unBind(t,e),t[u]&&t[u].apply(t,arguments)}}return i&&this.getUpdates(i)||o.reduce(function(t,e){return(0,y.walknSet)(t,e.alias||e.path,n.retrieve(e.path)),t},{})}},{key:"retrieve",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=f.default.string(t)?t.split("."):t,t&&this.stores[t[0]]&&this.stores[t[0]].retrieve&&this.stores[t[0]].retrieve(t.slice(1))}},{key:"restoreRefPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=f.default.string(t)?t.split("."):t;for(var n=void 0,r=0,i=this;r<t.length;){if(n=i.stores[t[r]],(e.isScopeClass(n)||e.isStoreClass(n))&&(i.mount(t[0]),n=i.stores[t[r]]),!e.isScope(n)){if(e.isStore(n)){n.restore();break}break}i=n,r++}}},{key:"retrieveStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=f.default.string(t)?t.split("."):t,t&&t.length&&(1!=t.length&&this.stores[t[0]].retrieveStore?this.stores[t[0]].retrieveStore(t.slice(1)):1==t.length&&this.stores[t[0]])}},{key:"getStoresRevs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=this._._scope;return t||(t={}),Object.keys(n).forEach(function(e){"$parent"!=e&&(f.default.fn(n[e])?t.hasOwnProperty(e)||(t[e]=!1):t[e]=n[e]._rev)}),e||(this._._mixed.reduce(function(e,n){return n.getStoresRevs(t),t},t),this.parent&&this.parent.getStoresRevs(t)),t}},{key:"_getRevMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._._scope;return Object.keys(e).forEach(function(n){"$parent"==n||t[n]||(t[n]={rev:e[n]._rev,refs:[]})}),this._._mixed.reduceRight(function(t,e){return e._getRevMap(t)},t),this.parent&&this.parent._getRevMap(t),t}},{key:"getRefsUpdates",value:function(t,e,n){var r=this;return e=e||t.map(function(t){return f.default.string(t)?t:t.name}).map(function(t){return r.parseRef(t)}).reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},{}),this.getUpdates(e,n)}},{key:"getUpdates",value:function(t,e,n){var r=this;return e=e||{},t=t||this._getRevMap(),Object.keys(t).forEach(function(i){var s=r.stores[i];t[i]=t[i]||{rev:0,refs:[]},s&&f.default.fn(s)?(n=!0,e[i]=void 0):s&&s._rev>t[i].rev&&(t[i].rev=s._rev,n=!0,t[i].refs.forEach(function(t){e[t.alias]=r.retrieve(t.path)}))}),n&&e}},{key:"_getAllChilds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.push.apply(t,i(this._.childScopes)),this._.childScopes.forEach(function(e){e._getAllChilds(t)}),t}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(this._._scope,this._),r=n.baseId,i=n.key,s=n.keyPID,o=(n.incrementId,t.alias),a=t.parentAlias,u=i?(a||s)+">"+i:o||a&&a+"/"+r||this._id;return this.serialize_ex(t,e,u,o,["$parent"])}},{key:"serialize_ex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],i=this,s=arguments[3],o=arguments[4],a=this._,u=a._scope,c=a.incrementId,h=t.withChilds,f=void 0===h||h,p=t.withMixed,d=void 0===p||p,_=t.norefs;if((0,y.keyWalknGet)(n,r)){if(!c)return n;if(c){for(var v=-1;(0,y.keyWalknGet)(n,r+"["+ ++v+"]"););r=r+"["+v+"]"}}return(0,y.keyWalknSet)(n,r,{}),Object.keys(u).forEach(function(i){o.includes(i)||e.isStoreClass(u[i])||e.isScopeClass(u[i])||u[i].serialize(l({},t,{parentAlias:r}),n)}),f&&a.childScopes.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!0,withParents:!1,parentAlias:r,withMixed:d,norefs:_},n)}),d&&a._mixed.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!1,withParents:!1,withMixed:d,norefs:_},n)}),s&&(n=Object.keys(n).reduce(function(t,e){return t[e===i._id?s:e]=n[e],t},{})),n}},{key:"restore",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.default.bool(n)&&n,i=this._._scope,o=void 0;t&&n&&n.alias&&n.alias!=this._id&&(o=l({},t,s({},this._id,t[n.alias])),delete o[n.alias],t=o),t=t&&(0,y.keyWalknGet)(t,this._id)||this.takeSnapshotByKey(this._id),t&&(this._.snapshot=l({},t),o=t["/"],t["/"]=l({},o),o&&Object.keys(o).forEach(function(t){"$parent"!=t&&i[t]&&(r&&!f.default.fn(i[t])&&i[t].destroy(),e._mount(t))}),this._._mixed.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}),this._.childScopes.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}))}},{key:"getSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var n=(0,y.keyWalknGet)(this._.snapshot,t.substr(this._id.length));return n}return!e&&this.parent&&this.parent.getSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.getSnapshotByKey(t)}},{key:"getSnapshotByKeyExt",value:function(t,e,n){if(t){var r=(0,y.keyWalknGet)(t,e);return r}}},{key:"takeSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var n=(0,y.keyWalknGet)(this._.snapshot,t.substr(this._id.length));return n&&this.deleteSnapshotByKey(t,!0),n}return!e&&this.parent&&this.parent.takeSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.takeSnapshotByKey(t)}},{key:"deleteSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var n=(0,y.keyWalknGet)(this._.snapshot,t.substr(this._id.length).replace(/^(.*[\>|\/])[^\>|\/]+$/gi,"$1"));n&&delete n[t.replace(/^.*[\>|\/]([^\>|\/]+)$/gi,"$1")]}return!e&&this.parent&&this.parent.deleteSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.deleteSnapshotByKey(t)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(n){return e.state[n]=t[n]})}},{key:"parseRef",value:function(t){"string"!=typeof t&&(this.register(s({},t.name,t.store)),t=t.name);var e=t.split(":");return e[0]=e[0].split("."),{storeId:e[0][0],path:e[0],alias:e[1]||e[0][e[0].length-1],ref:t}}},{key:"dispatch",value:function(t){for(var e,n=this,r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(!this.dead){var o=this._._boundedActions;return Object.keys(this._._scope).forEach(function(e){var r;"$parent"!=e&&(f.default.fn(n._._scope[e])||(r=n._._scope[e]).trigger.apply(r,[t].concat(i)))}),o&&o.test(t)?this:(this._._mixed.forEach(function(e){return e.dispatch.apply(e,[t].concat(i))}),this.parent&&(e=this.parent).dispatch.apply(e,[t].concat(i)),this)}}},{key:"trigger",value:function(){this.dispatch.apply(this,arguments)}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):this.once("stable",function(n){return e.then(t)})}},{key:"onceStableTree",value:function(t){var e=this;return this._.unStableChilds?this.once("stableTree",function(n){return e.onceStableTree(t)}):t(this.data)}},{key:"retainStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];e.forEach(function(e){return t.stores[e]&&t.stores[e].retain&&t.stores[e].retain(n)})}},{key:"disposeStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];e.forEach(function(e){return t.stores[e]&&t.stores[e].dispose&&t.stores[e].dispose(n)})}},{key:"wait",value:function(t){this._stable&&!this.__locks.all&&this.emit("unstable",this),this._stable=!1,this.__locks.all++,t&&(this.__locks[t]=this.__locks[t]||0,this.__locks[t]++)}},{key:"release",value:function(t){var e=this;if(t&&(0==this.__locks[t],this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),!t&&0==this.__locks.all,this.__locks.all--,!this.__locks.all){if(this._.stabilizerTM)return;this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.stabilizerTM=setTimeout(function(t){e._.stabilizerTM=null,e.__locks.all||(e._.propagTM&&clearTimeout(e._.propagTM),e._rev++,e._stable=!0,e.emit("stable",e),!e.dead&&e._propag())})}}},{key:"propag",value:function(){var t=this;this._.propagTM&&clearTimeout(this._.propagTM),this._.propagTM=setTimeout(function(e){t._.propagTM=null,t._propag()},2)}},{key:"_propag",value:function(){var t=this;this._.followers.length&&this._.followers.forEach(function(e){var n=e[0],r=(e[1],e[2]),o=e[3],a=(e[3],t.getUpdates(o));a&&("function"!=typeof n?r?n.setState(s({},r,a)):n.setState(a):n(a,o&&[].concat(i(o))||"no revs"))}),this.emit("update",this.getUpdates())}},{key:"isStable",value:function(){return this._stable}},{key:"isStableTree",value:function(){return!this._.unStableChilds}},{key:"_addChild",value:function(t){var e=this;this._.childScopes.push(t),this._.seenChilds++;var n={stable:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstable:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},stableTree:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstableTree:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},destroy:function(t){t._.unStableChilds&&e._.unStableChilds--,t.isStable()||e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)}},r=this._.unStableChilds;!t.isStable()&&this._.unStableChilds++,t._.unStableChilds&&this._.unStableChilds++,this._.childScopesList.push(n),!r&&this._.unStableChilds&&this.emit("unstableTree",this),t.on(n)}},{key:"_rmChild",value:function(t){var e=this._.childScopes.indexOf(t),n=this._.unStableChilds;e!=-1&&(this._.childScopes.splice(e,1),!t.isStable()&&this._.unStableChilds--,t._.unStableChilds&&this._.unStableChilds--,t.un(this._.childScopesList.splice(e,1)[0]),n&&!this._.unStableChilds&&this.emit("stableTree"))}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("Dispose more than retaining : "+t);this.__retains[t]--}if(!this.__retains.all)throw new Error("Dispose more than retaining !");this.__retains.all--,this.__retains.all||(this._.persistenceTm?(this._.destroyTM&&clearTimeout(this._.destroyTM),this._.destroyTM=setTimeout(function(t){e.then(function(t){!e.__retains.all&&!e.dead&&e.destroy()})},this._.persistenceTm)):this.then(function(t){return!e.__retains.all&&!e.dead&&e.destroy()}))}},{key:"destroy",value:function(){var t=this,e=this._._scope;this._getAllChilds().map(function(t){return t.destroy()});for(var n in e)if(!f.default.fn(e[n])){if("$parent"==n)continue;!e[n]._autoDestroy&&e[n].dispose("scoped")}for(this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.propagTM&&clearTimeout(this._.propagTM),Object.keys(this._._listening).forEach(function(e){return"$parent"!==e&&t._._scope[e].removeListener(t._._listening[e])});this._._mixedList.length;)this._._mixed[0].removeListener(this._._mixedList.shift()),this._._mixed.shift().dispose("mixedTo");[].concat(i(this._.followers)).map(function(e){return t.unBind.apply(t,i(e))}),this._._parentList&&(this.parent._rmChild(this),this.parent.removeListener(this._._parentList),this.parent.dispose("isMyParent"),this._._parentList=null),this.dead=!0,delete g[this._id],this.emit("destroy",this)}}]),e}(v.default);m.persistenceTm=1,m.Store=null,m.scopeRef=function(t){this.path=t},m.scopes=g,m.isScope=function(t){return t instanceof m},m.isScopeClass=function(t){return m.isPrototypeOf(t)||t===m},e.default=m,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),u=r(a),l=function(){function t(){s(this,t),this._events={}}return o(t,[{key:"on",value:function(t,e){var n=this;return!u.default.string(t)&&t?Object.keys(t).forEach(function(e){return n.on(e,t[e])}):(this._events[t]=this._events[t]||[],void this._events[t].push(e))}},{key:"un",value:function(t,e){var n=this;if(!u.default.string(t)&&t)return Object.keys(t).forEach(function(e){return n.un(e,t[e])});if(this._events[t]){var r=this._events[t].indexOf(e);this._events[t].splice(r,1)}}},{key:"emit",value:function(t){if(this._events[t]){for(var e=[].concat(i(this._events[t])),n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];for(var o=0;o<e.length;o++)e[o].apply(e,r)}}},{key:"addListener",value:function(){this.on.apply(this,arguments)}},{key:"removeListener",value:function(){this.un.apply(this,arguments)}},{key:"removeAllListeners",value:function(){this._events={}}},{key:"once",value:function(t,e){var n=this,r=void 0;this.on(t,r=function(){n.un(t,r),e.apply(void 0,arguments)})}}]),t}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e,n,s){return u.string(e)&&(e=e.split(".")),!!e.length&&(1==e.length?t[e[0]]=s?[].concat(r(t[e[0]]||[]),[n]):n:i(t[e[0]]=t[e[0]]||{},e.slice(1),n,s))}function s(t,e,n){return u.string(e)&&(e=e.split(".")),e.length?t[e[0]]&&s(t[e[0]],e.slice(1)):t}function o(t,e,n,r){return u.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),i(t,e,n)}function a(t,e,n){return u.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),e.length?t[e[0]]&&s(t[e[0]],e.slice(1)):t}Object.defineProperty(e,"__esModule",{value:!0}),e.walknSet=i,e.walknGet=s,e.keyWalknSet=o,e.keyWalknGet=a;var u=n(1)},function(t,e,n){"use strict";t.exports=n(13)},function(t,e,n){"use strict";function r(t,e){for(var n,r=0,s="";!n;)s+=t(e>>4*r&15|i()),n=e<Math.pow(16,r+1),r++;return s}var i=n(15);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},h=n(1),f=n(3),p=n(5),d=p.keyWalknSet,_=p.keyWalknGet,v=n(4),y=n(9),b=n(6),g=Object.getPrototypeOf({}),m=function(t){function e(){var t,n;s(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=[].concat(Array.prototype.slice.call(arguments)),u=r.constructor,l=a[0]instanceof f?a.shift():u.scope?f.getScope(u.scope):h.string(a[0])?f.getScope(a.shift()):u.staticScope,c=!a[0]||h.array(a[0])||h.string(a[0])?{}:a.shift(),p=h.array(a[0])?a.shift():null,d=c.name||u.name,_=c.use||[],v=c.apply||null,y=u.state||u.initialState||u.defaultState;return r._uid=c._uid||b.generate(),r.__retains={all:0},r.__locks={all:0},r._onStabilize=[],r._autoDestroy=!!r._persistenceTm,r._persistenceTm=c.persistenceTm||u.persistenceTm||(c.autoDestroy||u.autoDestroy)&&5,r._cfg=c,c&&c.on&&r.on(c.on),r.name=d,l.stores?(r.scopeObj=l,r.scope=l.stores):(r.scopeObj=new f(l),r.scope=l.stores),r.$scope=r.scopeObj,r.$stores=r.scopeObj.stores,r.$actions=r.scopeObj.actions,r.$dispatch=r.scopeObj.dispatch.bind(r.scopeObj),r._rev=r.constructor._rev||0,r._revs={},
r.stores={},r._require=[],r._sources=[d],h.array(u.use)?r._use=[].concat(i(_),i((u.use||[]).map(function(t){var e=t.match(/^(\!?)([^\:]*)(?:\:(.*))?$/);if(e[1]){var n=e[2].split(".");return r._require.push(e[3]||n[n.length-1]),t.substr(1)}return t}))):r._use=[].concat(i(_),i(u.use?Object.keys(u.use).map(function(t){var e=t.match(/^(\!?)(.*)$/);return e[1]&&r._require.push(u.use[t]),e[2]+(u.use[t]===!0?"":":"+u.use[t])}):[])),u.require&&(t=r._require).push.apply(t,i(u.require)),c.require&&(n=r._require).push.apply(n,i(c.require)),r._followers=[],r._changesSW=y||{},r.state=y&&{},v&&(r.apply=v),p?p.push(r._afterConstructor.bind(r)):setTimeout(r._afterConstructor.bind(r)),r}return a(e,t),l(e,[{key:"_afterConstructor",value:function(){var t=this._cfg,e=this.constructor,n=(this.restore(void 0,!0),this.state),r=this.data,i=void 0;r?this.data=r:void 0!==e.data?this.data=u({},e.data):t.hasOwnProperty("data")&&(this.data=t.data),t.hasOwnProperty("state")&&void 0!==t.state&&(n=u({},n,t.state)),void 0===this.data?(n||this._use.length)&&(this._nextState=this._changesSW=u({},this._changesSW,n||{},this.$scope.map(this,this._use)),this.state={},this.shouldApply(this._nextState)&&void 0===this.data&&(this.data=this.apply(this.data,this._nextState,this._changesSW),i=!0,this.state=this._changesSW,this._nextState=this._changesSW=null)):(i=!0,this.state=u({},this._changesSW,n||{},this.$scope.map(this,this._use)),this._nextState=this._changesSW=null),void 0===this.data&&!i||this.__locks.all?(this._stable=!1,!(e.managed||this.state||this._use&&this._use.length)):(this._stable=!0,this._rev++),!this._stable&&this.emit("unstable",this.state)}},{key:"shouldPropag",value:function(t){return!0}},{key:"shouldSerialize",value:function(){return!0}},{key:"hasDataChange",value:function(t){var e=void this.constructor,n=this.data;return e=!n&&t||n!==t,!e&&n&&Object.keys(n).forEach(function(r){e=e||(t?n[r]!==t[r]:n&&n[r])}),!e&&t&&Object.keys(t).forEach(function(r){e=e||(t?n[r]!==t[r]:n&&n[r])}),e}},{key:"shouldApply",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=this.constructor;return!!this.isComplete(e)&&(h.array(n.follow)?n.follow.reduce(function(t,n){return t||e&&e[n]},!1):!n.follow||Object.keys(n.follow).reduce(function(r,i){return r||e&&h.fn(n.follow[i])&&n.follow[i].call(t,e[i])||n.follow[i]&&e[i]!==t.state[i]},!1))}},{key:"apply",value:function(t,e,n){return e}},{key:"stabilize",value:function(t){t&&this.once("stable",t),this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this._stabilizer||(this._stabilizer=y.pushTask(this,"pushState"))}},{key:"retrieve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data;return t=h.string(t)?t.split("."):t,n&&t&&t.length?t.length==e+1?n[t[e]]:this.retrieve(t,e+1,n[t[e]]):n}},{key:"dispatch",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.scopeObj).dispatch.apply(e,[t].concat(r))}},{key:"trigger",value:function(t){var e=this.constructor.actions;if(e&&e[t]){for(var n,r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var o=(n=e[t]).call.apply(n,[this].concat(i));o&&this.setState(o)}}},{key:"push",value:function(t,e,n){if(n=e===!0?n:e,e=e===!0,!e&&!this.hasDataChange(t)){if(n&&n(),!this.__locks.all){var r=this._stable;this._stable=!0,!r&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=t,this.wait(),this.release(n)}},{key:"pushState",value:function(t){if(t||this._changesSW||!this.data){var e=t||this._nextState||this.state,n=void 0;if(Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]}),n=this.apply(this.data,e,this._changesSW),this._stabilizer=null,this.state=e,this._nextState=null,this._changesSW=null,!t&&!this.hasDataChange(n)){if(!this.__locks.all){var r=this._stable;this._stable=!0,!r&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=n,this.wait(),this.release()}}},{key:"setState",value:function(t,e,n){var r=void 0,i=this._changesSW=this._changesSW||{},s=this._nextState=this._nextState||u({},this.state),o=void 0;for(o in t)(!this.state||i.hasOwnProperty(o)&&t[o]!==i[o]||t.hasOwnProperty(o)&&t[o]!==this.state[o])&&(r=!0,s[o]=i[o]=t[o]);if(this.shouldApply(s))return n?(this.pushState(),e&&e()):r?this.stabilize(e):e&&e(),this}},{key:"setStateSync",value:function(t){var e=void 0,n=this._changesSW=this._changesSW||{};for(var r in t)(!this.state||t.hasOwnProperty(r)&&t[r]!==this.state[r])&&(e=!0,this._revs[r]=t[r]&&t[r]._rev||!0,n[r]=t[r]);return this.shouldApply(u({},this.state||{},n))&&this.pushState(),this.data}},{key:"as",value:function(t){return{store:this,name:t}}},{key:"on",value:function(t){var n=this;!h.string(t)&&t?Object.keys(t).forEach(function(r){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",n).call(n,r,t[r])}):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).apply(this,arguments)}},{key:"removeListener",value:function(t){var n=this;!h.string(t)&&t?Object.keys(t).forEach(function(r){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeListener",n).call(n,r,t[r])}):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeListener",this).apply(this,arguments)}},{key:"isComplete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return!this._require||!this._require.length||t&&this._require.reduce(function(e,n){return e&&t[n]},!0)}},{key:"isStable",value:function(){return this._stable}},{key:"serialize",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.parentAlias||this.scopeObj._id,s=0,o=!n.norefs&&h.array(this._use)&&this._use.reduce(function(n,r){var i=t.$scope.parseRef(r),o=t.$stores[i.storeId];return o&&e.isStore(o)&&!o.scopeObj._.isLocalId&&(s++,n[i.alias]=i.path),n},{}),a=this.state||{},l=this.shouldSerialize();if(!l)return d(r,i+"/"+this.name,{dataRefs:n.dataRefs,refs:o}),r;var c=Object.keys(a)||[],f=c.map(function(t){return a[t]}),p=0,_=n.dataRefs||{},v=!n.norefs&&this.data&&Object.keys(this.data).reduce(function(e,n){var r=f.indexOf(t.data[n]);return r!=-1&&(p++,e[n]=c[r]),e},{}),y={dataRefs:n.dataRefs,state:a&&(n.norefs?u({},a):Object.keys(a).reduce(function(t,e){return!o[e]&&(t[e]=a[e]),t},{})),data:(this.data&&this.data.__proto__===g?Object.keys(this.data).reduce(function(e,n){return v[n]||_[n]||(e[n]=t.data[n],p++),e},{}):(h.bool(this.data)||h.number(this.data)||h.string(this.data))&&this.data)||void 0};return o&&s&&(y.refs=o),v&&p&&(y.inRefs=v),d(r,i+"/"+this.name,y),r}},{key:"restore",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this;t=t&&_(t,this.scopeObj._id+"/"+this.name)||this.$scope.takeSnapshotByKey(this.scopeObj._id+"/"+this.name),t&&t&&(this.isStable()||e||this.then(function(){return restore(t)}),this.state=u({},t.state),t.refs&&Object.keys(t.refs).forEach(function(e){n.state[e]=n.$scope.retrieve(t.refs[e])}),t.inRefs===!0?this.data=u({},this.state):(this.data=t.data,t.inRefs&&Object.keys(t.inRefs).forEach(function(e){n.data[e]=n.state[t.inRefs[e]]})),t.dataRefs&&(this.data=this.data||{},Object.keys(t.dataRefs).forEach(function(e){n.$scope.restoreRefPath(t.dataRefs[e]),n.data[e]=n.$scope.retrieve(t.dataRefs[e])})))})},{key:"bind",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];if(this._followers.push([t,e,i]),n&&this.data&&this._stable){var s=i?this.retrieve(i):this.data;"function"!=typeof t?e?t.setState(r({},e,s)):t.setState(s):t(s)}}},{key:"unBind",value:function(t,e,n){for(var r=this._followers,i=r&&r.length;r&&i--;)if(r[i][0]===t&&r[i][1]===e&&r[i][2]===n)return r.splice(i,1)}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):void this.once("stable",function(n){return t(e.data)})}},{key:"wait",value:function(t){if("number"==typeof t)return this.__locks.all+=t;if(h.array(t))return t.map(this.wait.bind(this));this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this.__locks.all++;var e=h.string(t)?t:null;return e&&(this.__locks[e]=this.__locks[e]||0,this.__locks[e]++),t&&h.fn(t.then)&&t.then(this.release.bind(this,null)),this}},{key:"release",value:function(t,e){var n=(this.constructor,this),i=this._stable;if(h.fn(t)&&(e=t,t=null),t&&(0==this.__locks[t],this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),!t&&0==this.__locks.all,!--this.__locks.all&&this.isComplete()){var s=this.shouldPropag(this.data);this._stable=!0,s&&this._rev++,s&&this._followers.length&&this._followers.forEach(function(t){var e=t[2]?n.retrieve(t[2]):n.data;"function"==typeof t[0]?t[0](e):t[0].setState(t[1]?r({},t[1],e):e)}),!i&&this.emit("stable",this.data),s&&this.emit("update",this.data),e&&e()}else e&&this.then(e);return this}},{key:"propag",value:function(t){this.emit("update",t)}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("RS : Dispose more than retaining on store '"+this.name+"' : "+t);this.__retains[t]--}if(0==this.__retains.all)throw new Error("RS : Dispose more than retaining on store "+this.name);this.__retains.all--,this.__retains.all||(this._persistenceTm?(this._destroyTM&&clearTimeout(this._destroyTM),this._destroyTM=setTimeout(function(t){e._destroyTM=null,!e.__retains.all&&!e.dead&&e.destroy()},this._persistenceTm)):!this.__retains.all&&!this.dead&&this.destroy())}},{key:"destroy",value:function(){this.emit("destroy",this),this._stabilizer&&clearTimeout(this._stabilizer),this._followers.length&&this._followers.forEach(function(t){"function"!=typeof t[0]&&t[0].stores&&delete t[0].stores[t[1]]}),this._followers.length=0,this.constructor._rev=this.rev,this.dead=!0,this._revs=this.data=this.state=this.scope=null,this.removeAllListeners()}},{key:"nextState",get:function(){return this._nextState||this.state}}]),e}(v);m.staticScope=new f({},{id:"static"}),m.state=void 0,m.persistenceTm=!1,m.as=function(t){return{store:this,name:t}},m.map=function(t,e,n,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t._revs||{},a=t.stores||(t.stores={}),u={};return e=h.array(e)?[].concat(i(e)):[e],n=n||m.staticScope,e=e.filter(function(e){var r;if(!e)return!1;var l=void 0,c=void 0,p=void 0,d=void 0,_=void 0;if(e.store&&e.name?(c=l=e.name,d=e.store):h.fn(e)?(l=c=e.name||e.defaultName,d=e):(_=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/),l=_[1],p=_[2]&&_[2].substr(1),d=n.stores[_[1]],c=_[3]||p&&p.match(/([^\.]*)$/)[0]||_[1]),!d){var v=[];for(var y in n.stores)v.push(y);return!1}if(f.isScopeClass(d)&&n._mount(l),f.isScope(d))d=n._mount(e);else if(o[l])return!1;return h.fn(d)?(n._mount(l),n.stores[l].bind(t,c,s,p)):d.bind(t,c,s,p),n.stores[l]._sources&&(r=t._sources).push.apply(r,i(n.stores[l]._sources)),o[c]=o[c]||!0,!a[l]&&(a[l]=n.stores[l]),n.stores[l].hasOwnProperty("data")&&(u[l]=n.data[l]),!0}),t.once("destroy",function(){e.map(function(e){var r=void 0,i=void 0,s=void 0,o=void 0;e.store&&e.name?(i=r=e.name,o=e.store):h.fn(e)?(r=i=e.name||e.defaultName,o=n.stores[r]):(e=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/),r=e[1],s=e[2]&&e[2].substr(1),o=n.stores[e[1]],i=e[3]||s&&s.match(/([^\.]*)$/)[0]||e[1]),o&&!h.fn(o)&&o.unBind(t,i,s)})}),u},m.isStore=f.isStore=function(t){return t instanceof m},m.isStoreClass=f.isStoreClass=function(t){return m.isPrototypeOf(t)||t===m},e.default=m,t.exports=e.default},function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(){p||o()}function o(){for(Date.now(),p=!0,d.enable();h;){for(;!u[l]||!u[l].length;)l++;h--,f=u[l].shift(),f[0][f[1]].apply(f[0],f[2])}f=void 0,d.disable(),p=!1,h&&setTimeout(s)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=(i(a),[]),l=0,c=0,h=0,f=void 0,p=void 0,d={lastError:null,dispatch:function(t){d.disable(),f&&f[0].handleError&&f[0].handleError(t,f),p=!1,f=null,s()},enable:"undefined"!=typeof window?function(){window.addEventListener("error",d.dispatch)}:function(){r.on("uncaughtException",d.dispatch)},disable:"undefined"!=typeof window?function(){window.removeEventListener("error",d.dispatch)}:function(){r.removeListener("uncaughtException",d.dispatch)}};e.default={pushTask:function(t,e,n){var r=t._sources&&t._sources.length||1,i=u[r]=u[r]||[];return c=Math.max(c,r),l=Math.min(l,r),h++,i.push([t,e,n]),setTimeout(s,0),i.length}},t.exports=e.default}).call(e,n(10))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function o(){_&&p&&(_=!1,p.length?d=p.concat(d):v=-1,d.length&&a())}function a(){if(!_){var t=i(o);_=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,_=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],_=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||_||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){var e="",n=Math.floor(.001*(Date.now()-u));return n===s?i++:(i=0,s=n),e+=o(a.lookup,l),e+=o(a.lookup,t),i>0&&(e+=o(a.lookup,i)),e+=o(a.lookup,n)}var i,s,o=n(7),a=n(2),u=1459707606518,l=6;t.exports=r},function(t,e,n){"use strict";function r(t){var e=i.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}var i=n(2);t.exports=r},function(t,e,n){"use strict";function r(e){return a.seed(e),t.exports}function i(e){return h=e,t.exports}function s(t){return void 0!==t&&a.characters(t),a.shuffled()}function o(){return l(h)}var a=n(2),u=(n(7),n(12)),l=n(11),c=n(14),h=n(17)||0;t.exports=o,t.exports.generate=o,t.exports.seed=r,t.exports.worker=i,t.exports.characters=s,t.exports.decode=u,t.exports.isValid=c},function(t,e,n){"use strict";function r(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=i.characters(),n=t.length,r=0;r<n;r++)if(e.indexOf(t[r])===-1)return!1;return!0}var i=n(2);t.exports=r},function(t,e){"use strict";function n(){if(!r||!r.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return r.getRandomValues(t),48&t[0]}var r="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=n},function(t,e){"use strict";function n(){return i=(9301*i+49297)%233280,i/233280}function r(t){i=t}var i=1;t.exports={nextValue:n,seed:r}},function(t,e){"use strict";t.exports=0}]);
//# sourceMappingURL=ReScope.browser.min.js.map
!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="/",e(0)}([function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(4),o=i(s),a=r(9),u=i(a),c=r(11),l="undefined"!=typeof window?window:n,h=l.___rescope||{};l.___rescope||(l.___rescope=h,o.default.Store=u.default,h.Scope=o.default,h.Context=o.default,h.Store=u.default,h.reScope=c.reScope,h.scopeToState=c.scopeToState,h.reScopeState=c.scopeToState,h.addScopableType=c.addScopableType,h.scopeRef=function(t,e){return t[e]=new o.default.scopeRef(t[e]),t}),e.default=h,t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,s=n.toString;"function"==typeof Symbol&&(r=Symbol.prototype.valueOf);var o=function(t){return t!==t},a={boolean:1,number:1,string:1,undefined:1},u=/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/,c=/^[A-Fa-f0-9]+$/,l={};l.a=l.type=function(t,e){return typeof t===e},l.defined=function(t){return"undefined"!=typeof t},l.empty=function(t){var e,r=s.call(t);if("[object Array]"===r||"[object Arguments]"===r||"[object String]"===r)return 0===t.length;if("[object Object]"===r){for(e in t)if(i.call(t,e))return!1;return!0}return!t},l.equal=function(t,e){if(t===e)return!0;var r,n=s.call(t);if(n!==s.call(e))return!1;if("[object Object]"===n){for(r in t)if(!(l.equal(t[r],e[r])&&r in e))return!1;for(r in e)if(!(l.equal(t[r],e[r])&&r in t))return!1;return!0}if("[object Array]"===n){if(r=t.length,r!==e.length)return!1;for(;r--;)if(!l.equal(t[r],e[r]))return!1;return!0}return"[object Function]"===n?t.prototype===e.prototype:"[object Date]"===n&&t.getTime()===e.getTime()},l.hosted=function(t,e){var r=typeof e[t];return"object"===r?!!e[t]:!a[r]},l.instance=l.instanceof=function(t,e){return t instanceof e},l.nil=l.null=function(t){return null===t},l.undef=l.undefined=function(t){return"undefined"==typeof t},l.args=l.arguments=function(t){var e="[object Arguments]"===s.call(t),r=!l.array(t)&&l.arraylike(t)&&l.object(t)&&l.fn(t.callee);return e||r},l.array=Array.isArray||function(t){return"[object Array]"===s.call(t)},l.args.empty=function(t){return l.args(t)&&0===t.length},l.array.empty=function(t){return l.array(t)&&0===t.length},l.arraylike=function(t){return!!t&&!l.bool(t)&&i.call(t,"length")&&isFinite(t.length)&&l.number(t.length)&&t.length>=0},l.bool=l.boolean=function(t){return"[object Boolean]"===s.call(t)},l.false=function(t){return l.bool(t)&&Boolean(Number(t))===!1},l.true=function(t){return l.bool(t)&&Boolean(Number(t))===!0},l.date=function(t){return"[object Date]"===s.call(t)},l.date.valid=function(t){return l.date(t)&&!isNaN(Number(t))},l.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},l.error=function(t){return"[object Error]"===s.call(t)},l.fn=l.function=function(t){var e="undefined"!=typeof window&&t===window.alert;if(e)return!0;var r=s.call(t);return"[object Function]"===r||"[object GeneratorFunction]"===r||"[object AsyncFunction]"===r},l.number=function(t){return"[object Number]"===s.call(t)},l.infinite=function(t){return t===1/0||t===-(1/0)},l.decimal=function(t){return l.number(t)&&!o(t)&&!l.infinite(t)&&t%1!==0},l.divisibleBy=function(t,e){var r=l.infinite(t),n=l.infinite(e),i=l.number(t)&&!o(t)&&l.number(e)&&!o(e)&&0!==e;return r||n||i&&t%e===0},l.integer=l.int=function(t){return l.number(t)&&!o(t)&&t%1===0},l.maximum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!l.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;--r>=0;)if(t<e[r])return!1;return!0},l.minimum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!l.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;--r>=0;)if(t>e[r])return!1;return!0},l.nan=function(t){return!l.number(t)||t!==t},l.even=function(t){return l.infinite(t)||l.number(t)&&t===t&&t%2===0},l.odd=function(t){return l.infinite(t)||l.number(t)&&t===t&&t%2!==0},l.ge=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(e)&&t>=e},l.gt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(e)&&t>e},l.le=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(e)&&t<=e},l.lt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(e)&&t<e},l.within=function(t,e,r){if(o(t)||o(e)||o(r))throw new TypeError("NaN is not a valid value");if(!l.number(t)||!l.number(e)||!l.number(r))throw new TypeError("all arguments must be numbers");var n=l.infinite(t)||l.infinite(e)||l.infinite(r);return n||t>=e&&t<=r},l.object=function(t){return"[object Object]"===s.call(t)},l.primitive=function(t){return!t||!("object"==typeof t||l.object(t)||l.fn(t)||l.array(t))},l.hash=function(t){return l.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},l.regexp=function(t){return"[object RegExp]"===s.call(t)},l.string=function(t){return"[object String]"===s.call(t)},l.base64=function(t){return l.string(t)&&(!t.length||u.test(t))},l.hex=function(t){return l.string(t)&&(!t.length||c.test(t))},l.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===s.call(t)&&"symbol"==typeof r.call(t)},t.exports=l},function(t,e,r){"use strict";function n(){f=!1}function i(t){if(!t)return void(l!==_&&(l=_,n()));if(t!==l){if(t.length!==_.length)throw new Error("Custom alphabet for shortid must be "+_.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,r){return e!==r.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+_.length+" unique characters. These characters were not unique: "+e.join(", "));l=t,n()}}function s(t){return i(t),l}function o(t){p.seed(t),h!==t&&(n(),h=t)}function a(){l||i(_);for(var t,e=l.split(""),r=[],n=p.nextValue();e.length>0;)n=p.nextValue(),t=Math.floor(n*e.length),r.push(e.splice(t,1)[0]);return r.join("")}function u(){return f?f:f=a()}function c(t){var e=u();return e[t]}var l,h,f,p=r(18),_="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={characters:s,seed:o,lookup:c,shuffled:u}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=r(1);e.default=n({},i),t.exports=e.default},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(3),h=r(6),f=h.walknSet,p=(h.walknGet,h.keyWalknSet),_=h.keyWalknGet,d=r(5),v=r(7),y=function(t,e,r){var n=function(){};n.prototype=r?new r._[e]:t[e]||{},t[e]=new n,t._[e]=n},b={},g=({}.constructor,function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.parent,i=r.upperScope,a=r.key,u=r.id,c=r.snapshot,h=r.state,f=r.data,p=r.incrementId,_=void 0===p?!!a:p,d=r.persistenceTm,g=r.autoDestroy,m=r.rootEmitter,w=r.boundedActions;s(this,e);var k=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),S={keyPID:i&&i._id||n&&n._id||v.generate(),key:a,incrementId:_,baseId:u};if(u=u||a&&S.keyPID+">"+a,S.isLocalId=!u,u=u||"_____"+v.generate(),b[u]&&!_){var O;return k._id=u,b[u].register(t),O=b[u],o(k,O)}if(b[u]&&_){for(var j=-1;b[u+"["+ ++j+"]"];);u=u+"["+j+"]"}if(k._id=u,k._rev=0,b[u]=k,S.persistenceTm=d||k.constructor.persistenceTm,k.actions={},k.stores={},k.state={},k.data={},k.parent=n,k._=S,k._autoDestroy=g,n&&n.dead)throw new Error("Can't use a dead scope as parent !");return y(k,"actions",n),y(k,"stores",n),y(k,"state",n),y(k,"data",n),k.sources=[],S.childScopes=[],S.childScopesList=[],S.unStableChilds=0,S.seenChilds=0,k.__retains={all:0},k.__locks={all:1},S._boundedActions=l.array(w)?{test:w.includes.bind(w)}:w,S._listening={},S._scope={},S._mixed=[],S._mixedList=[],S.followers=[],n&&(n.retain("isMyParent"),m?n.on(S._parentList={update:function(t){return k._propag()}}):(!n._stable&&k.wait("waitingParent"),n.on(S._parentList={stable:function(t){return k.release("waitingParent")},unstable:function(t){return k.wait("waitingParent")},update:function(t){return k._propag()}}))),k.register(t,h,f),k.__locks.all--,k._stable=!k.__locks.all,n&&n._addChild(k),k.restore(c),g&&setTimeout(function(t){k.retain("autoDestroy"),k.dispose("autoDestroy")}),k}return a(e,t),c(e,null,[{key:"getScope",value:function(t){var r=l.array(t)?t.sort(function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0}).join("+"):t;return b[r]=b[r]||new e({},{id:r})}},{key:"stateMapToRefList",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object.keys(t).forEach(function(o){var a=s?s+"."+o:o;t[o]instanceof e.scopeRef?n.push(t[o].path+":"+a):t[o]&&t[o]instanceof Function?i[o]=t[o]:t[o]&&t[o].prototype instanceof e.Store?n.push(t[o].as(a)):r[a]=t[o]}),n}}]),c(e,[{key:"mount",value:function(t,e,r,n){var i=this;return l.array(t)?t.forEach(function(t){return i._mount(t,e,r,n)}):this._mount.apply(this,arguments),this}},{key:"_mount",value:function(t,e,r,n){var i=void 0;if(i=this.parseRef(t),"$parent"!=t){if(!this._._scope[i.storeId]){var s;if(this._._mixed.reduceRight(function(i,s){return i||s._mount(t,e,r,n)},!1)||!this.parent)return;return(s=this.parent)._mount.apply(s,arguments)}var o=this._._scope[i.storeId],a=[];if(l.rsStoreClass(o))for(this._._scope[i.storeId]=new o(this,{name:i.storeId,state:r,data:n},a);a.length;)a.shift()();else l.rsScopeClass(o)&&(o=this._._scope[i.storeId]=new o({$parent:this},{key:i.storeId,incrementId:!0,upperScope:this}),i.path.length>1&&this._._scope[i.storeId].mount(i.path.slice(1).join("."),e,r,n));return l.rsStore(o)&&(void 0!==r&&void 0===n?o.setState(r):void 0!==r&&(o.state=r),void 0!==n&&o.push(n)),this._watchStore(i.storeId),this._._scope[i.storeId]}}},{key:"_watchStore",value:function(t,e,r){var n=this;return this._._listening[t]||l.fn(this._._scope[t])||(!this._._scope[t]._autoDestroy&&this._._scope[t].retain("scoped"),!this._._scope[t].isStable()&&this.wait(t),this._._scope[t].on(this._._listening[t]={destroy:function(e){delete n._._listening[t],n._._scope[t]=n._._scope[t].constructor},update:function(t){return n.propag()},stable:function(e){return n.release(t)},unstable:function(e){return n.wait(t)}})),!0}},{key:"mixin",value:function(t){var e=this,r=this.parent,n=void 0;this._._mixed.push(t),t.retain("mixedTo"),t._stable||this.wait(t._id),this._._mixedList.push(n={stable:function(r){return e.release(t._id)},unstable:function(r){return e.wait(t._id)},update:function(t){return e._propag()}}),t.on(n),y(this,"actions",r),y(this,"stores",r),y(this,"state",r),y(this,"data",r),this.relink(this._._scope,this,!1,!0),this._._mixed.forEach(function(t){y(e,"actions"),y(e,"stores"),y(e,"state"),y(e,"data"),e.stores.__origin="mixed "+t._id,t.relink(t._._scope,e,!0,!0)})}},{key:"register",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.relink(t,this,!1,!1),Object.keys(t).forEach(function(i){"$parent"!=i&&(t[i].singleton||l.fn(t[i])&&(r[i]||n[i])?e._mount(i,void 0,r[i],n[i]):r[i]||n[i]?n[i]?(r[i]&&(e.stores[i].state=r[i]),e.stores[i].push(n[i])):r[i]&&e.stores[i].setState(r[i]):e._watchStore(i))})}},{key:"relink",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=this,i=arguments[2],s=arguments[3],o=r._.stores.prototype;Object.keys(t).forEach(function(a){if(!(!s&&r._._scope[a]===t[a]||r._._scope[a]&&r._._scope[a].constructor===t[a])){if(!s&&r._._scope[a]){if(!i&&!l.fn(r._._scope[a])){var u=r._._scope[a];r._._scope[a]=r._._scope[a].constructor,n._mount(a,null,u.state),u.destroy()}return void(!i&&l.fn(r._._scope[a])&&(r._._scope[a]=t[a]))}if(s||i||(n._._scope[a]=t[a]),Object.defineProperty(o,a,{enumerable:!0,configurable:!0,get:function(){return n._._scope[a]}}),"$parent"!=a){Object.defineProperty(r._.state.prototype,a,{enumerable:!0,configurable:!0,get:function(){return n._._scope[a]&&n._._scope[a].state},set:function(t){return n._mount(a,void 0,t)}}),Object.defineProperty(r._.data.prototype,a,{enumerable:!0,configurable:!0,get:function(){return n._._scope[a]&&n._._scope[a].data},set:function(t){return n._mount(a,void 0,void 0,t)}});var c=t[a]instanceof e.Store?t[a].constructor.actions:t[a].actions,h=r._.actions.prototype;l.rsScope(n._._scope[a].prototype)&&n._mount(a),l.rsScope(n._._scope[a])&&(h[a]=n._._scope[a].actions),(l.rsStore(n._._scope[a])||l.rsStoreClass(n._._scope[a]))&&c&&Object.keys(c).forEach(function(t){h.hasOwnProperty(t)?h[t].__targetStores++:(h[t]=n.dispatch.bind(n,t),h[t].__targetStores=1)})}}})}},{key:"bind",value:function(t,e,r){var n=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=void 0,u=void 0,c=void 0;if(e&&!l.array(e)&&(e=[e]),r!==!1&&r!==!0||(s=r,r=null),c=e.map(function(t){return l.string(t)?t:t.name}).map(function(t){return n.parseRef(t)}),this._.followers.push([t,e,r||void 0,a=c.reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},o)]),this.mount(e),this.retainStores(Object.keys(a),"listeners"),s&&this._stable){if(u=this.getUpdates(a),!u)return this;"function"!=typeof t?r?t.setState(i({},r,u)):t.setState(u):t(u)}return this}},{key:"unBind",value:function(t,e,r){for(var n=this._.followers,i=n&&n.length;n&&i--;)if(n[i][0]===t&&""+n[i][1]==""+e&&n[i][2]==r)return this.disposeStores(Object.keys(n[i][3]),"listeners"),n.splice(i,1)}},{key:"map",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],s=this.constructor.Store;e=l.array(e)?e:[e];var o=e.map(this.parseRef);if(this.mount(e),n&&t instanceof s)s.map(t,e,this,this,!1);else if(n){this.bind(t,e,void 0,!1);var a=void 0,u=t.isReactComponent?"componentWillUnmount":"destroy";t.hasOwnProperty(u)&&(a=t[u]),t[u]=function(){return delete t[u],a&&(t[u]=a),r.unBind(t,e),t[u]&&t[u].apply(t,arguments)}}return i&&this.getUpdates(i)||o.reduce(function(t,e){return f(t,e.alias||e.path,r.retrieve(e.path)),t},{})}},{key:"retrieve",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=l.string(t)?t.split("."):t,t&&this.stores[t[0]]&&this.stores[t[0]].retrieve&&this.stores[t[0]].retrieve(t.slice(1))}},{key:"retrieveStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=l.string(t)?t.split("."):t,t&&t.length&&(1!=t.length&&this.stores[t[0]].retrieveStore?this.stores[t[0]].retrieveStore(t.slice(1)):1==t.length&&this.stores[t[0]])}},{key:"getStoresRevs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],r=this._._scope;return t||(t={}),Object.keys(r).forEach(function(e){"$parent"!=e&&(l.fn(r[e])?t.hasOwnProperty(e)||(t[e]=!1):t[e]=r[e]._rev)}),e||(this._._mixed.reduce(function(e,r){return r.getStoresRevs(t),t},t),this.parent&&this.parent.getStoresRevs(t)),t}},{key:"getRefsUpdates",value:function(t,e,r){var n=this;return e=e||t.map(function(t){return l.string(t)?t:t.name}).map(function(t){return n.parseRef(t)}).reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},{}),this.getUpdates(e,r)}},{key:"getUpdates",value:function(t,e,r){var n=this,i=this._._scope;return e=e||{},Object.keys(i).forEach(function(s){"$parent"!=s&&(e.hasOwnProperty(s)||l.fn(i[s])||t&&(!t.hasOwnProperty(s)||void 0!==t[s])&&(!t.hasOwnProperty(s)||i[s]._rev<=t[s].rev)?e.hasOwnProperty(s)||(e[s]=void 0):(r=!0,e[s]=n.data[s],t&&t.hasOwnProperty(s)?(t[s]=t[s]||{rev:0,refs:[]},t[s].rev=i[s]._rev,t[s].refs.forEach(function(t){e[t.alias]=n.retrieve(t.path)})):e[s]=n.data[s]))}),r=this._._mixed.reduceRight(function(r,n){return n.getUpdates(t,e,r)||r},r),r=this.parent&&this.parent.getUpdates(t,e,r)||r,r&&e}},{key:"_getAllChilds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.push.apply(t,n(this._.childScopes)),this._.childScopes.forEach(function(e){e._getAllChilds(t)}),t}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(this._._scope,this._),n=r.baseId,i=r.key,s=r.keyPID,o=(r.incrementId,t.alias),a=t.parentAlias,u=i?(a||s)+">"+i:o||a&&a+"/"+n||this._id;return this.serialize_ex(t,e,u,o,["$parent"])}},{key:"serialize_ex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=this,i=arguments[3],s=arguments[4],o=this._._scope,a=this._,c=(a.baseId,a.key,a.keyPID,a.incrementId),h=t.withChilds,f=void 0===h||h,d=(t.withParents,t.withMixed),v=void 0===d||d,y=t.norefs;if(t.parentAlias,t.aliases,_(e,r)){if(!c)return e;if(c){for(var b=-1;_(e,r+"["+ ++b+"]"););r=r+"["+b+"]"}}return p(e,r,{}),Object.keys(o).forEach(function(n){s.includes(n)||l.rsStoreClass(o[n])||l.rsScopeClass(o[n])||o[n].serialize(u({},t,{parentAlias:r}),e)}),f&&this._.childScopes.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!0,withParents:!1,parentAlias:r,withMixed:v,norefs:y},e)}),v&&this._._mixed.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!1,withParents:!1,withMixed:v,norefs:y},e)}),i&&(e=Object.keys(e).reduce(function(t,r){return t[r===n._id?i:r]=e[r],t},{})),e}},{key:"restore",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.bool(r)&&r,s=this._._scope,o=void 0;t&&r&&r.alias&&r.alias!=this._id&&(o=u({},t,i({},this._id,t[r.alias])),delete o[r.alias],t=o),t=t&&_(t,this._id)||this.takeSnapshotByKey(this._id),t&&(this._.snapshot=u({},t),o=t["/"],t["/"]=u({},o),o&&Object.keys(o).forEach(function(t){"$parent"!=t&&s[t]&&(n&&!l.fn(s[t])&&s[t].destroy(),e._mount(t))}),this._._mixed.forEach(function(t){!t._.isLocalId&&t.restore(void 0,n)}),this._.childScopes.forEach(function(t){!t._.isLocalId&&t.restore(void 0,n)}))}},{key:"getSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var r=_(this._.snapshot,t.substr(this._id.length));return r}return!e&&this.parent&&this.parent.getSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.getSnapshotByKey(t)}},{key:"getSnapshotByKeyExt",value:function(t,e,r){if(t){var n=_(t,e);return n}}},{key:"takeSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var r=_(this._.snapshot,t.substr(this._id.length));return r&&this.deleteSnapshotByKey(t,!0),r}return!e&&this.parent&&this.parent.takeSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.takeSnapshotByKey(t)}},{key:"deleteSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var r=_(this._.snapshot,t.substr(this._id.length).replace(/^(.*[\>|\/])[^\>|\/]+$/gi,"$1"));r&&delete r[t.replace(/^.*[\>|\/]([^\>|\/]+)$/gi,"$1")]}return!e&&this.parent&&this.parent.deleteSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.deleteSnapshotByKey(t)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(r){return e.state[r]=t[r]})}},{key:"parseRef",value:function(t){"string"!=typeof t&&(this.register(i({},t.name,t.store)),t=t.name);var e=t.split(":");return e[0]=e[0].split("."),{storeId:e[0][0],path:e[0],alias:e[1]||e[0][e[0].length-1],ref:t}}},{key:"dispatch",value:function(t){for(var e,r=this,n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(!this.dead){var o=this._._boundedActions;if(Object.keys(this._._scope).forEach(function(e){var n;"$parent"!=e&&(l.fn(r._._scope[e])||(n=r._._scope[e]).trigger.apply(n,[t].concat(i)))}),!o||!o.test(t))return this._._mixed.forEach(function(e){return e.dispatch.apply(e,[t].concat(i))}),this.parent&&(e=this.parent).dispatch.apply(e,[t].concat(i)),this}}},{key:"trigger",value:function(){this.dispatch.apply(this,arguments)}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):void this.once("stable",function(r){return t(e.data)})}},{key:"retainStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1];e.forEach(function(e){return t.stores[e]&&t.stores[e].retain&&t.stores[e].retain(r)})}},{key:"disposeStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1];e.forEach(function(e){return t.stores[e]&&t.stores[e].dispose&&t.stores[e].dispose(r)})}},{key:"wait",value:function(t){this._stable&&!this.__locks.all&&this.emit("unstable",this),this._stable=!1,this.__locks.all++,t&&(this.__locks[t]=this.__locks[t]||0,this.__locks[t]++)}},{key:"release",value:function(t){var e=this;t&&(0==this.__locks[t],this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),!t&&0==this.__locks.all,this.__locks.all--,this.__locks.all||(this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.stabilizerTM=setTimeout(function(t){e._.stabilizerTM=null,e.__locks.all||(e._.propagTM&&clearTimeout(e._.propagTM),e._rev++,e._stable=!0,e.emit("stable",e),!e.dead&&e._propag())}))}},{key:"propag",value:function(){var t=this;this._.propagTM&&clearTimeout(this._.propagTM),this._.propagTM=setTimeout(function(e){t._.propagTM=null,t._propag()},2)}},{key:"_propag",value:function(){var t=this;this._.followers.length&&this._.followers.forEach(function(e){var r=e[0],s=(e[1],e[2]),o=e[3],a=(e[3],t.getUpdates(o));a&&("function"!=typeof r?s?r.setState(i({},s,a)):r.setState(a):r(a,o&&[].concat(n(o))||"no revs"))}),this.emit("update",this.getUpdates())}},{key:"isStable",value:function(){return this._stable}},{key:"_addChild",value:function(t){var e=this;this._.childScopes.push(t),this._.seenChilds++;var r={stable:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstable:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},stableTree:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstableTree:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},destroy:function(t){t._.unStableChilds&&e._.unStableChilds--,t.isStable()||e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)}},n=this._.unStableChilds;!t.isStable()&&this._.unStableChilds++,t._.unStableChilds&&this._.unStableChilds++,this._.childScopesList.push(r),!n&&this._.unStableChilds&&this.emit("unstableTree",this),t.on(r)}},{key:"_rmChild",value:function(t){var e=this._.childScopes.indexOf(t),r=this._.unStableChilds;e!=-1&&(this._.childScopes.splice(e,1),!t.isStable()&&this._.unStableChilds--,t._.unStableChilds&&this._.unStableChilds--,t.un(this._.childScopesList.splice(e,1)[0]),r&&!this._.unStableChilds&&this.emit("stableTree"))}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("Dispose more than retaining : "+t);this.__retains[t]--}if(!this.__retains.all)throw new Error("Dispose more than retaining !");this.__retains.all--,this.__retains.all||(this._.persistenceTm?(this._.destroyTM&&clearTimeout(this._.destroyTM),this._.destroyTM=setTimeout(function(t){!e.__retains.all&&!e.dead&&e.destroy()},this._.persistenceTm)):!this.__retains.all&&!this.dead&&this.destroy())}},{key:"destroy",value:function(){var t=this,e=this._._scope;for(this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.propagTM&&clearTimeout(this._.propagTM),Object.keys(this._._listening).forEach(function(e){return"$parent"!==e&&t._._scope[e].removeListener(t._._listening[e])});this._._mixedList.length;)this._._mixed[0].removeListener(this._._mixedList.shift()),this._._mixed.shift().dispose("mixedTo");[].concat(n(this._.followers)).map(function(e){return t.unBind.apply(t,n(e))});for(var r in e)if(!l.fn(e[r])){if("$parent"==r)continue;!e[r]._autoDestroy&&e[r].dispose("scoped")}this._._parentList&&(this.parent._rmChild(this),this.parent.removeListener(this._._parentList),this.parent.dispose("isMyParent"),this._._parentList=null),this.dead=!0,this.emit("destroy",this),delete b[this._id]}}]),e}(d));g.persistenceTm=1,g.Store=null,g.scopeRef=function(t){this.path=t},g.scopes=b,l.rsScope=function(t){return t instanceof g},l.rsScopeClass=function(t){return g.isPrototypeOf(t)||t===g},e.default=g,t.exports=e.default},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(1),a=function(){function t(){i(this,t),this._events={}}return s(t,[{key:"on",value:function(t,e){var r=this;return!o.string(t)&&t?Object.keys(t).forEach(function(e){return r.on(e,t[e])}):(this._events[t]=this._events[t]||[],void this._events[t].push(e))}},{key:"un",value:function(t,e){var r=this;if(!o.string(t)&&t)return Object.keys(t).forEach(function(e){return r.un(e,t[e])});if(this._events[t]){var n=this._events[t].indexOf(e);this._events[t].splice(n,1)}}},{key:"emit",value:function(t){if(this._events[t]){for(var e=[].concat(n(this._events[t])),r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0;o<e.length;o++)e[o].apply(e,i)}}},{key:"addListener",value:function(){this.on.apply(this,arguments)}},{key:"removeListener",value:function(){this.un.apply(this,arguments)}},{key:"removeAllListeners",value:function(){this._events={}}},{key:"once",value:function(t,e){var r=this,n=void 0;this.on(t,n=function(){r.un(t,n),e.apply(void 0,arguments)})}}]),t}();e.default=a,t.exports=e.default},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e,r,s){return u.string(e)&&(e=e.split(".")),!!e.length&&(1==e.length?t[e[0]]=s?[].concat(n(t[e[0]]||[]),[r]):r:i(t[e[0]]=t[e[0]]||{},e.slice(1),r,s))}function s(t,e,r){return u.string(e)&&(e=e.split(".")),e.length?t[e[0]]&&s(t[e[0]],e.slice(1)):t}function o(t,e,r,n){return u.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),i(t,e,r)}function a(t,e,r){return u.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),e.length?t[e[0]]&&s(t[e[0]],e.slice(1)):t}Object.defineProperty(e,"__esModule",{value:!0}),e.walknSet=i,e.walknGet=s,e.keyWalknSet=o,e.keyWalknGet=a;var u=r(3)},function(t,e,r){"use strict";t.exports=r(15)},function(t,e,r){"use strict";function n(t,e){for(var r,n=0,s="";!r;)s+=t(e>>4*n&15|i()),r=e<Math.pow(16,n+1),n++;return s}var i=r(17);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},h=r(3),f=r(4),p=r(6),_=p.keyWalknSet,d=p.keyWalknGet,v=r(5),y=r(10),b=r(7),g=Object.getPrototypeOf({}),m=function(t){function e(){var t,r;s(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=[].concat(Array.prototype.slice.call(arguments)),u=n.constructor,c=a[0]instanceof f?a.shift():u.scope?f.getScope(u.scope):h.string(a[0])?f.getScope(a.shift()):u.staticScope,l=!a[0]||h.array(a[0])||h.string(a[0])?{}:a.shift(),p=h.array(a[0])?a.shift():null,_=l.name||u.name,d=l.use||[],v=l.apply||null,y=u.state||u.initialState||u.defaultState;return n._uid=l._uid||b.generate(),n.__retains={all:0},n.__locks={all:0},n._onStabilize=[],n._autoDestroy=!!n._persistenceTm,n._persistenceTm=l.persistenceTm||u.persistenceTm||(l.autoDestroy||u.autoDestroy)&&5,n._cfg=l,l&&l.on&&n.on(l.on),n.name=_,c.stores?(n.scopeObj=c,n.scope=c.stores):(n.scopeObj=new f(c),n.scope=c.stores),n.$scope=n.scopeObj,n.$stores=n.scopeObj.stores,n.$actions=n.scopeObj.actions,n.$dispatch=n.scopeObj.dispatch.bind(n.scopeObj),n._rev=n.constructor._rev||0,n._revs={},n.stores={},n._require=[],n._sources=[_],h.array(u.use)?n._use=[].concat(i(d),i((u.use||[]).map(function(t){var e=t.match(/^(\!?)([^\:]*)(?:\:(.*))?$/);if(e[1]){var r=e[2].split(".");n._require.push(e[3]||r[r.length-1])}return e[2]}))):n._use=[].concat(i(d),i(u.use?Object.keys(u.use).map(function(t){var e=t.match(/^(\!?)(.*)$/);return e[1]&&n._require.push(u.use[t]),e[2]+(u.use[t]===!0?"":":"+u.use[t])}):[])),u.require&&(t=n._require).push.apply(t,i(u.require)),l.require&&(r=n._require).push.apply(r,i(l.require)),n._followers=[],n._changesSW=y||{},n.state=y&&{},v&&(n.apply=v),p?p.push(n._afterConstructor.bind(n)):setTimeout(n._afterConstructor.bind(n)),n}
return a(e,t),c(e,[{key:"_afterConstructor",value:function(){var t=this._cfg,e=this.constructor,r=(this.restore(void 0,!0),this.state),n=this.data,i=void 0;n?this.data=n:void 0!==e.data?this.data=u({},e.data):t.hasOwnProperty("data")&&(this.data=t.data),t.hasOwnProperty("state")&&void 0!==t.state&&(r=u({},r,t.state)),void 0===this.data?(r||this._use.length)&&(this._changesSW=u({},this._changesSW,r||{},this.$scope.map(this,this._use)),this.state={},this.shouldApply(this._changesSW)&&void 0===this.data&&(this.data=this.apply(this.data,this._changesSW,this._changesSW),i=!0,this.state=this._changesSW,this._changesSW={})):(i=!0,this.state=u({},this._changesSW,r||{},this.$scope.map(this,this._use)),this._changesSW={}),void 0===this.data&&!i||this.__locks.all?(this._stable=!1,!(e.managed||this.state||this._use&&this._use.length)):(this._stable=!0,this._rev++),!this._stable&&this.emit("unstable",this.state)}},{key:"shouldPropag",value:function(t){return!0}},{key:"hasDataChange",value:function(t){var e,r=(this.constructor,this.data);return e=!r&&t||r!==t,!e&&r&&Object.keys(r).forEach(function(n){e=e||(t?r[n]!==t[n]:r&&r[n])}),!e&&t&&Object.keys(t).forEach(function(n){e=e||(t?r[n]!==t[n]:r&&r[n])}),e}},{key:"shouldApply",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,r=this.constructor;return!!this.isComplete(e)&&(h.array(r.follow)?r.follow.reduce(function(t,r){return t||e&&e[r]},!1):!r.follow||Object.keys(r.follow).reduce(function(n,i){return n||e&&h.fn(r.follow[i])&&r.follow[i].call(t,e[i])||r.follow[i]&&e[i]!==t.state[i]},!1))}},{key:"apply",value:function(t,e,r){return e=e||this.state,this.refine?this.refine.apply(this,arguments):t&&t.__proto__===g&&e.__proto__===g?u({},t,e):e}},{key:"refine",value:function(t,e,r){return e=e||this.state,t&&t.__proto__===g&&e.__proto__===g?u({},t,e):e}},{key:"stabilize",value:function(t){t&&this.once("stable",t),this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this._stabilizer||(this._stabilizer=y.pushTask(this,"pushState"))}},{key:"retrieve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data;return t=h.string(t)?t.split("."):t,r&&t&&t.length?t.length==e+1?r[t[e]]:this.retrieve(t,e+1,r[t[e]]):r}},{key:"dispatch",value:function(t){for(var e,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(e=this.scopeObj).dispatch.apply(e,[t].concat(n))}},{key:"trigger",value:function(t){var e=this.constructor.actions;if(e&&e[t]){for(var r,n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var o=(r=e[t]).call.apply(r,[this].concat(i));o&&this.setState(o)}}},{key:"pull",value:function(t,e,r){var n=this,i=this.scopeObj.map(this,t);return e&&(this.wait(),t.forEach(function(t){return n.scope[t]&&n.wait(n.scope[t])}),this.release()),i}},{key:"push",value:function(t,e,r){if(r=e===!0?r:e,e=e===!0,!e&&!this.hasDataChange(t)){if(r&&r(),!this.__locks.all){var n=this._stable;this._stable=!0,!n&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=t,this.wait(),this.release(r)}},{key:"pushState",value:function(t){if(t||this._changesSW||!this.data){var e=this._nextState||u({},this.state,this._changesSW||{}),r=this.apply(this.data,e,this._changesSW);if(this._stabilizer=null,this.state=e,this._changesSW=null,!t&&!this.hasDataChange(r)){if(!this.__locks.all){var n=this._stable;this._stable=!0,!n&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=r,this.wait(),this.release()}}},{key:"setState",value:function(t,e,r){var n,i=this._changesSW=this._changesSW||{};for(var s in t)(!this.state||i.hasOwnProperty(s)&&t[s]!==i[s]||t.hasOwnProperty(s)&&(t[s]!==this.state[s]||this.state[s]&&t[s]&&t[s]._rev!=this._revs[s]))&&(n=!0,this._revs[s]=t[s]&&t[s]._rev||!0,i[s]=t[s]);if(this._nextState=u({},this.state,i),this.shouldApply(this._nextState))return r?(this.pushState(),e&&e()):n?this.stabilize(e):e&&e(),this}},{key:"setStateSync",value:function(t){var e,r=this._changesSW=this._changesSW||{};for(var n in t)(!this.state||t.hasOwnProperty(n)&&(t[n]!=this.state[n]||this.state[n]&&t[n]&&t[n]._rev!=this._revs[n]))&&(e=!0,this._revs[n]=t[n]&&t[n]._rev||!0,r[n]=t[n]);return this.shouldApply(u({},this.state||{},r))&&this.pushState(),this.data}},{key:"as",value:function(t){return{store:this,name:t}}},{key:"on",value:function(t){var r=this;!h.string(t)&&t?Object.keys(t).forEach(function(n){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",r).call(r,n,t[n])}):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).apply(this,arguments)}},{key:"removeListener",value:function(t){var r=this;!h.string(t)&&t?Object.keys(t).forEach(function(n){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeListener",r).call(r,n,t[n])}):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeListener",this).apply(this,arguments)}},{key:"isComplete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return this.constructor,!this._require||!this._require.length||t&&this._require.reduce(function(e,r){return e&&t[r]},!0)}},{key:"isStable",value:function(){return this._stable}},{key:"serialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.parentAlias||this.scopeObj._id,i=!e.norefs&&h.array(this._use)&&this._use.reduce(function(e,r){var n=void 0,i=void 0,s=void 0,o=void 0,a=void 0;return r.store&&r.name?(i=n=r.name,a=r.store):h.fn(r)?(n=i=r.name||r.defaultName,a=r):(o=r.match(/([\w_]+)((?:\.[\w_]+)*)(?:\:([\w_]+))?/),n=o[1],s=o[2]&&o[2].substr(1),a=t.scopeObj.stores[o[1]],i=o[3]||s&&s.match(/([^\.]*)$/)[0]||o[1]),a&&h.rsStore(a)&&!a.scopeObj._.isLocalId&&(e[i]=a.scopeObj._id+"/"+n),e},{})||{};return _(r,n+"/"+this.name,{state:this.state&&(e.norefs?u({},this.state):Object.keys(this.state).reduce(function(e,r){return!i[r]&&(e[r]=t.state[r]),e},{})),data:(this.data&&this.data.__proto__===g?this.data:(h.bool(this.data)||h.number(this.data)||h.string(this.data))&&this.data)||void 0,refs:i}),r}},{key:"restore",value:function(t){function e(e,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var r=this;if(t=t&&d(t,this.scopeObj._id+"/"+this.name)||this.$scope.takeSnapshotByKey(this.scopeObj._id+"/"+this.name),t&&t){this.isStable()||e||this.then(function(){return restore(t)});var n=void 0;this.state=u({},t.state),Object.keys(t.refs).forEach(function(e){(n=r.$scope.getSnapshotByKey(t.refs[e]))&&(r.state[e]=n.data)}),this.data=t.data}})},{key:"unBind",value:function(t,e,r){for(var n=this._followers,i=n&&n.length;n&&i--;)if(n[i][0]===t&&n[i][1]===e&&n[i][2]===r)return n.splice(i,1)}},{key:"bind",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];if(this._followers.push([t,e,i]),r&&this.data&&this._stable){var s=i?this.retrieve(i):this.data;"function"!=typeof t?e?t.setState(n({},e,s)):t.setState(s):t(s)}}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):void this.once("stable",function(r){return t(e.data)})}},{key:"wait",value:function(t){if("number"==typeof t)return this.__locks.all+=t;if(h.array(t))return t.map(this.wait.bind(this));this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this.__locks.all++;var e=h.string(t)?t:null;return e&&(this.__locks[e]=this.__locks[e]||0,this.__locks[e]++),t&&h.fn(t.then)&&t.then(this.release.bind(this,null)),this}},{key:"release",value:function(t,e){var r=(this.constructor,this),i=this._stable;if(h.fn(t)&&(e=t,t=null),t&&(0==this.__locks[t],this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),!t&&0==this.__locks.all,!--this.__locks.all&&this.isComplete()){var s=this.shouldPropag(this.data);this._stable=!0,s&&this._rev++,s&&this._followers.length&&this._followers.forEach(function(t){var e=t[2]?r.retrieve(t[2]):r.data;"function"==typeof t[0]?t[0](e):t[0].setState(t[1]?n({},t[1],e):e)}),!i&&this.emit("stable",this.data),s&&this.emit("update",this.data),e&&e()}else e&&this.then(e);return this}},{key:"propag",value:function(t){this.emit("update",t)}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("RS : Dispose more than retaining on store '"+this.name+"' : "+t);this.__retains[t]--}if(0==this.__retains.all)throw new Error("RS : Dispose more than retaining on store "+this.name);this.__retains.all--,this.__retains.all||(this._persistenceTm?(this._destroyTM&&clearTimeout(this._destroyTM),this._destroyTM=setTimeout(function(t){e._destroyTM=null,!e.__retains.all&&!e.dead&&e.destroy()},this._persistenceTm)):!this.__retains.all&&!this.dead&&this.destroy())}},{key:"destroy",value:function(){this.emit("destroy",this),this._stabilizer&&clearTimeout(this._stabilizer),this._followers.length&&this._followers.forEach(function(t){"function"!=typeof t[0]&&t[0].stores&&delete t[0].stores[t[1]]}),this._followers.length=0,this.constructor._rev=this.rev,this.dead=!0,this._revs=this.data=this.state=this.scope=null,this.removeAllListeners()}},{key:"nextState",get:function(){return this._changesSW&&u({},this.state,this._changesSW)||this.state}}]),e}(v);m.staticScope=new f({},{id:"static"}),m.state=void 0,m.persistenceTm=!1,m.as=function(t){return{store:this,name:t}},m.map=function(t,e,r,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t._revs||{},a=t.stores||(t.stores={}),u={};return e=h.array(e)?[].concat(i(e)):[e],r=r||m.staticScope,e=e.filter(function(e){var n;if(!e)return!1;var c=void 0,l=void 0,f=void 0,p=void 0,_=void 0;if(e.store&&e.name?(l=c=e.name,p=e.store):h.fn(e)?(c=l=e.name||e.defaultName,p=e):(_=e.match(/([\w_]+)((?:\.[\w_]+)*)(?:\:([\w_]+))?/),c=_[1],f=_[2]&&_[2].substr(1),p=r.stores[_[1]],l=_[3]||f&&f.match(/([^\.]*)$/)[0]||_[1]),!p){var d=[];for(var v in r.stores)d.push(v);return!1}if(h.rsScopeClass(p)&&r._mount(c),h.rsScope(p))p=r._mount(e);else if(o[c])return!1;return h.fn(p)?(r._mount(c),r.stores[c].bind(t,l,s,f)):p.bind(t,l,s,f),r.stores[c]._sources&&(n=t._sources).push.apply(n,i(r.stores[c]._sources)),o[l]=o[l]||!0,!a[c]&&(a[c]=r.stores[c]),r.stores[c].hasOwnProperty("data")&&(u[c]=r.data[c]),!0}),t.once("destroy",function(){e.map(function(e){var n=void 0,i=void 0,s=void 0,o=void 0;e.store&&e.name?(i=n=e.name,o=e.store):h.fn(e)?(n=i=e.name||e.defaultName,o=r.stores[n]):(e=e.match(/([\w_]+)((?:\.[\w_]+)*)(?:\:([\w_]+))?/),n=e[1],s=e[2]&&e[2].substr(1),o=r.stores[e[1]],i=e[3]||s&&s.match(/([^\.]*)$/)[0]||e[1]),o&&!h.fn(o)&&o.unBind(t,i,s)})}),u},h.rsStore=function(t){return t instanceof m},h.rsStoreClass=function(t){return m.isPrototypeOf(t)||t===m},e.default=m,t.exports=e.default},function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(){p||o()}function o(){for(Date.now(),p=!0,_.enable();h;){for(;!u[c]||!u[c].length;)c++;h--,f=u[c].shift(),f[0][f[1]].apply(f[0],f[2])}f=void 0,_.disable(),p=!1,h&&setTimeout(s)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=(i(a),[]),c=0,l=0,h=0,f=void 0,p=void 0,_={lastError:null,dispatch:function(t){_.disable(),f&&f[0].handleError&&f[0].handleError(t,f),p=!1,f=null,s()},enable:"undefined"!=typeof window?function(){window.addEventListener("error",_.dispatch)}:function(){n.on("uncaughtException",_.dispatch)},disable:"undefined"!=typeof window?function(){window.removeEventListener("error",_.dispatch)}:function(){n.removeListener("uncaughtException",_.dispatch)}};e.default={pushTask:function(t,e,r){var n=t._sources&&t._sources.length||1,i=u[n]=u[n]||[];return l=Math.max(l,n),c=Math.min(c,n),h++,i.push([t,e,r]),setTimeout(s,0),i.length}},t.exports=e.default}).call(e,r(12))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function s(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f.push({test:t,member:r,stateScope:n,handle:e})}function o(t,e,r){for(var n=0;n<f.length;n++)if((void 0===e||e==f[n].member)&&r==f[n].stateScope&&f[n].test(t))return!0;return!1}function a(t,e,r,n){for(var s=0;s<f.length;s++){var o;if(r==f[s].member&&n==f[s].stateScope&&f[s].test(t))return(o=f[s]).handle.apply(o,[t].concat(i(e)))}return!1}function u(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e[0]instanceof h&&e[2]instanceof h&&e[0].hasOwnProperty(e[1])?(e[2].value=a(e[0],[],!0,!1),e[0]):o(e[0],void 0,!1)?a(e[0],e.slice(1),!1,!1):function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r[0]instanceof h&&r[2]instanceof h&&r[0].hasOwnProperty(r[1])?(r[2].value=a(r[0],e,!0,!1),r[0]):u.apply(void 0,[r[0]].concat(e))}}function c(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e[0]instanceof h&&e[2]instanceof h&&e[0].hasOwnProperty(e[1])?(e[2].value=a(e[0],[],!0,!0),e[0]):o(e[0],void 0,!0)?a(e[0],e.slice(1),!1,!0):function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r[0]instanceof h&&r[2]instanceof h&&r[0].hasOwnProperty(r[1])?(r[2].value=a(r[0],e,!0,!0),r[0]):c.apply(void 0,[r[0]].concat(e))}}Object.defineProperty(e,"__esModule",{value:!0}),e.scopeToState=e.reScope=e.addScopableType=void 0;var l=r(1),h=(n(l),{}.constructor),f=[];e.addScopableType=s,e.reScope=u,e.scopeToState=c},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function o(){d&&p&&(d=!1,p.length?_=p.concat(_):v=-1,_.length&&a())}function a(){if(!d){var t=i(o);d=!0;for(var e=_.length;e;){for(p=_,_=[];++v<e;)p&&p[v].run();v=-1,e=_.length}p=null,d=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,_=[],d=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];_.push(new u(t,e)),1!==_.length||d||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,r){"use strict";function n(t){var e="",r=Math.floor(.001*(Date.now()-u));return r===s?i++:(i=0,s=r),e+=o(a.lookup,c),e+=o(a.lookup,t),i>0&&(e+=o(a.lookup,i)),e+=o(a.lookup,r)}var i,s,o=r(8),a=r(2),u=1459707606518,c=6;t.exports=n},function(t,e,r){"use strict";function n(t){var e=i.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}var i=r(2);t.exports=n},function(t,e,r){"use strict";function n(e){return a.seed(e),t.exports}function i(e){return h=e,t.exports}function s(t){return void 0!==t&&a.characters(t),a.shuffled()}function o(){return c(h)}var a=r(2),u=(r(8),r(14)),c=r(13),l=r(16),h=r(19)||0;t.exports=o,t.exports.generate=o,t.exports.seed=n,t.exports.worker=i,t.exports.characters=s,t.exports.decode=u,t.exports.isValid=l},function(t,e,r){"use strict";function n(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=i.characters(),r=t.length,n=0;n<r;n++)if(e.indexOf(t[n])===-1)return!1;return!0}var i=r(2);t.exports=n},function(t,e){"use strict";function r(){if(!n||!n.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return n.getRandomValues(t),48&t[0]}var n="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=r},function(t,e){"use strict";function r(){return i=(9301*i+49297)%233280,i/233280}function n(t){i=t}var i=1;t.exports={nextValue:r,seed:n}},function(t,e){"use strict";t.exports=0}]);
//# sourceMappingURL=ReScope.browser.min.js.map
{"version":3,"sources":["webpack:///webpack/bootstrap bc4d0b86c7c7e0263d16","webpack:///./src/Rescope.js","webpack:///./src/Context.js","webpack:///./src/Store.js","webpack:///./~/isstring/isString.umd.js","webpack:///./~/isarray/index.js","webpack:///./~/isfunction/lib/main.js","webpack:///./~/events/events.js","webpack:///./~/shortid/index.js","webpack:///./~/shortid/lib/index.js","webpack:///./~/shortid/lib/alphabet.js","webpack:///./~/shortid/lib/random/random-from-seed.js","webpack:///./~/shortid/lib/encode.js","webpack:///./~/shortid/lib/random/random-byte-browser.js","webpack:///./~/shortid/lib/decode.js","webpack:///./~/shortid/lib/build.js","webpack:///./~/shortid/lib/is-valid.js","webpack:///./~/shortid/lib/util/cluster-worker-id-browser.js"],"names":["Store","Context","isString","require","isArray","EventEmitter","isFunction","shortid","__proto__push","target","id","parent","here","prototype","openContexts","key","ctx","state","datas","name","_id","generate","register","_isLocalId","stores","sources","__retainLocks","all","__w8Locks","__listening","__context","__mixed","_followers","retain","on","__parentStableList","release","__parentUnStableList","wait","_stable","forEach","_mount","k","arguments","reduce","mounted","mount","constructor","mountStore","isStable","targetCtx","push","relink","rawCtx","Object","keys","singleton","srcCtx","lctx","_stores","console","warn","defineProperty","get","set","v","undefined","obj","as","setInitial","lastRevs","revs","getUpdates","setState","followers","i","length","splice","doWait","origin","bind","output","updated","hasOwnProperty","_rev","flags_states","flags_datas","_flags_states","_flags_datas","flags","r","flag","test","lists","cb","once","quiet","reason","destroy","log","emit","_stabilizerTM","clearTimeout","setTimeout","un","context","dispose","contexts","objProto","getPrototypeOf","store","component","targetRevs","_revs","initialOutputs","staticContext","filter","error","alias","defaultName","match","mixedCWUnmount","unMountKey","isReactComponent","map","split","unBind","apply","skey","sort","a","b","firstname","join","contextMap","getContext","argz","_static","shift","cfg","watchs","use","refine","initialState","_uid","setMaxListeners","defaultMaxListeners","locks","_onStabilize","_use","contextObj","_require","pull","isComplete","nDatas","cDatas","follow","changes","__proto__","me","_stabilizer","event","s","force","nextState","_changesSW","nextDatas","shouldPropag","pState","sync","change","stabilize","from","previous","then","follower","dead","removeAllListeners","autokill"],"mappings":"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;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AC7SA;AACA;;;;;;;ACDA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACxBA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClBA;;AAEA,+EAA8E;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACbA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC/CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClBA;;AAEA","file":"dist/Rescope.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bc4d0b86c7c7e0263d16","/*\r\n * Copyright (c)  2017 Caipi Labs .\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\nimport Context from \"./Context\";\r\nimport Store from \"./Store\";\r\n\r\nContext.Store = Store;\r\n\r\nexport default {Store, Context};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Rescope.js","/*\r\n * Copyright (c) 2017.  Caipi Labs.  All rights reserved.\r\n *\r\n * This File is part of Caipi. You can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *  This project is dual licensed under AGPL and Commercial Licence.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\n\r\n/**\r\n * @author Nathanael BRAUN\r\n *\r\n * Date: 13/08/2017\r\n * Time: 17:15\r\n */\r\n\r\n\r\nvar isString        = require('isstring'),\r\n    isArray         = require('isarray'),\r\n    EventEmitter    = require('events'),\r\n    isFunction      = require('isfunction')\r\n    , shortid       = require('shortid')\r\n    , __proto__push = ( target, id, parent ) => {\r\n    let here           = {\r\n        [id]() {\r\n        }\r\n    };\r\n    here[id].prototype = parent ? new parent[\"_\" + id]() : target[id] || {};\r\n    target[id]         = new here[id]();\r\n    target['_' + id]   = here[id];\r\n};\r\n\r\nlet openContexts = {};\r\n\r\nexport default class Context extends EventEmitter {\r\n    static contexts = openContexts;\r\n    static Store    = null;\r\n\r\n    static getContext( key ) {\r\n        return openContexts[key] = openContexts[key] || new Context({});\r\n    };\r\n\r\n    constructor( ctx, {id, parent, state, datas, name} = {} ) {\r\n        super();\r\n\r\n        this._id = id = id || (\"_____\" + shortid.generate());\r\n\r\n        if ( openContexts[id] ) {\r\n            openContexts[id].register(ctx);\r\n            return openContexts[id]\r\n        }\r\n\r\n        openContexts[id] = this;\r\n        this._isLocalId  = true;\r\n\r\n\r\n        this.stores = {};\r\n        this.state  = {};\r\n        this.datas  = {};\r\n        __proto__push(this, 'stores', parent);\r\n        __proto__push(this, 'state', parent);\r\n        __proto__push(this, 'datas', parent);\r\n        this.parent  = parent;\r\n        this.sources = [];\r\n\r\n        this.__retainLocks = {all : 0};\r\n        this.__w8Locks     = {all : 1};\r\n        this.__listening   = {};\r\n        this.__context     = {};\r\n        this.__mixed       = [];\r\n        this._followers    = [];\r\n        if ( parent ) {\r\n            parent.retain(\"isMyParent\");\r\n            parent.on('stable', this.__parentStableList = s => this.release(\"isMyParent\"));\r\n            parent.on('unstable', this.__parentUnStableList = s => this.wait(\"isMyParent\"));\r\n            // this.register(parent.__context, state, datas);\r\n        }\r\n\r\n\r\n        this.register(ctx, state, datas);\r\n        this.__w8Locks.all--;\r\n        this._stable = !!this.__w8Locks.all;\r\n\r\n    }\r\n\r\n    mount( id, state, datas ) {\r\n        if ( isArray(id) ) {\r\n            id.forEach(k => this._mount(k, state && state[k], datas && datas[k]));\r\n        } else {\r\n            this._mount(...arguments);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    _mount( id, state, datas ) {\r\n        if ( !this.__context[id] ) {//ask mixed || parent\r\n            if ( this.__mixed.reduce(( mounted, ctx ) => (mounted || ctx._mount(id, state, datas)), false) || !this.parent)\r\n                return;\r\n            return this.parent.mount(...arguments);\r\n        }\r\n        this.constructor.Store.mountStore(id, this, null, state, datas);\r\n\r\n        if ( !this.__listening[id] ) {\r\n            !this.__context[id].isStable() && this.wait(id);\r\n\r\n            this.__context[id].on(\r\n                this.__listening[id] = {\r\n                    'stable'   : s => this.release(id),\r\n                    'unstable' : s => this.wait(id)\r\n                });\r\n        }\r\n        return this.__context[id];\r\n    }\r\n\r\n\r\n    mixin( targetCtx ) {\r\n        let parent = this.parent;\r\n        this.__mixed.push(targetCtx)\r\n        __proto__push(this, 'stores', parent);\r\n        __proto__push(this, 'state', parent);\r\n        __proto__push(this, 'datas', parent);\r\n        targetCtx.relink(targetCtx.__context, this);\r\n\r\n        __proto__push(this, 'stores', this);\r\n        __proto__push(this, 'state', this);\r\n        __proto__push(this, 'datas', this);\r\n        this.relink(this.__context, this);\r\n    }\r\n\r\n    register( rawCtx, state = {}, datas = {} ) {\r\n        this.relink(rawCtx, this, state, datas);\r\n        Object.keys(rawCtx).forEach(\r\n            id => (isFunction(rawCtx[id]) && rawCtx[id].singleton && this._mount(id, state[id], datas[id])))\r\n\r\n    }\r\n\r\n    /**\r\n     * Map srcCtx store's on targetCtx headers proto's\r\n     * @param srcCtx\r\n     * @param targetCtx\r\n     * @param state\r\n     * @param datas\r\n     */\r\n    relink( srcCtx, targetCtx = this, state = {}, datas = {} ) {\r\n        let lctx = targetCtx._stores.prototype;\r\n        Object.keys(srcCtx)\r\n            .forEach(\r\n                id => {\r\n                    if ( targetCtx.__context[id] === srcCtx[id] ||\r\n                        targetCtx.__context[id] && (targetCtx.__context[id].constructor === srcCtx[id] ) )\r\n                        return;\r\n\r\n                    if ( targetCtx.__context[id] ) {\r\n                        console.warn(\"Rescope Context : \", id, \" already exist in this context !\");\r\n                        return;\r\n                    }\r\n\r\n                    targetCtx.__context[id] = srcCtx[id];\r\n\r\n                    Object.defineProperty(\r\n                        lctx,\r\n                        id,\r\n                        (( ctx, id ) => (\r\n                            {\r\n                                get : () => targetCtx._mount(id, state[id], datas[id])\r\n                            }\r\n                        ))\r\n                        (targetCtx.__context, id)\r\n                    );\r\n                    Object.defineProperty(\r\n                        targetCtx.state,\r\n                        id,\r\n                        (( ctx, id ) => (\r\n                            {\r\n                                get : () => (ctx[id] && ctx[id].state),\r\n                                set : ( v ) => (targetCtx._mount(id, v))\r\n                            }\r\n                        ))\r\n                        (lctx, id)\r\n                    );\r\n                    Object.defineProperty(\r\n                        targetCtx.datas,\r\n                        id,\r\n                        (( ctx, id ) => (\r\n                            {\r\n                                get : () => (ctx[id] && ctx[id].datas),\r\n                                set : ( v ) => (targetCtx._mount(id, undefined, v))\r\n                            }\r\n                        ))\r\n                        (lctx, id)\r\n                    );\r\n                }\r\n            )\r\n    }\r\n\r\n    /**\r\n     * @param obj {React.Component|Store|function)\r\n     * @param key {string} optional key where to map the public state\r\n     */\r\n    bind( obj, key, as, setInitial = true ) {\r\n        let lastRevs, datas;\r\n        if ( key && !isArray(key) )\r\n            key = [key];\r\n\r\n        // key = key||\r\n\r\n        if ( as === true ) {\r\n            setInitial = true;\r\n            as         = null;\r\n        }\r\n\r\n        this._followers.push(\r\n            [\r\n                obj,\r\n                key,\r\n                as,\r\n                lastRevs = key && key.reduce(( revs, id ) => (revs[id] = 0, revs), {})\r\n            ]);\r\n\r\n        this.mount(key);\r\n\r\n        if ( setInitial && this._stable ) {\r\n            datas = this.getUpdates(lastRevs);\r\n            if ( !datas ) return;\r\n            if ( typeof obj != \"function\" ) {\r\n                if ( as ) obj.setState({[as] : datas});\r\n                else obj.setState(datas);\r\n            } else {\r\n                obj(datas);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Un bind this context off the given component-keys\r\n     * @param obj\r\n     * @param key\r\n     * @returns {Array.<*>}\r\n     */\r\n    unBind( obj, key, as ) {\r\n        var followers = this._followers,\r\n            i         = followers && followers.length;\r\n        while (followers && i--)\r\n            if ( followers[i][0] === obj && ('' + followers[i][1]) == ('' + key) &&\r\n                ('' + followers[i][2]) == ('' + as) )\r\n                return followers.splice(i, 1);\r\n    }\r\n\r\n    /**\r\n     * Pull stores in the private state\r\n     * @param stores  {Array} (passed to Store::map) Ex : [\"session\", \"otherNamedStore:key\", otherStore.as(\"otherKey\")]\r\n     */\r\n    pull( stores, doWait, origin ) {\r\n        this.mount(stores);\r\n        this.bind(origin, stores, null, false);\r\n\r\n        return stores.reduce(( datas, id ) => (datas[id] = this.stores[id].datas, datas), {});\r\n    }\r\n\r\n    getUpdates( revs, output ) {\r\n        let updated = false,\r\n            ctx     = this.__context;\r\n\r\n        output      = output || {};\r\n        Object.keys(ctx).forEach(\r\n            id => {\r\n                if ( !revs || !( !revs.hasOwnProperty(id) || ctx[id]._rev <= revs[id] ) ) {\r\n\r\n                    updated    = true;\r\n                    output[id] = this.datas[id];\r\n                    if ( revs )\r\n                        revs[id] = ctx[id]._rev;\r\n\r\n                }\r\n            }\r\n        );\r\n        updated = this.__mixed.reduce(( updated, ctx ) => (ctx.getUpdates(revs, output) || updated), updated);\r\n        updated = this.parent && this.parent.getUpdates(revs, output) || updated;\r\n        return updated && output;\r\n    }\r\n\r\n    serialize( flags_states = /.*/, flags_datas = /.*/ ) {\r\n        let ctx = this.__context, output = {state : {}, datas : {}},\r\n            _flags_states,\r\n            _flags_datas;\r\n        if ( isArray(flags_states) )\r\n            flags_states.forEach(id => (output.state[id] = this.state[id]))\r\n\r\n        if ( isArray(flags_datas) )\r\n            flags_datas.forEach(id => (output.datas[id] = this.datas[id]))\r\n\r\n        if ( !isArray(flags_datas) && !isArray(flags_states) )\r\n            Object.keys(ctx).forEach(\r\n                id => {\r\n                    if ( isFunction(ctx[id]) )\r\n                        return;\r\n\r\n                    let flags = ctx[id].constructor.flags;\r\n\r\n                    flags = isArray(flags) ? flags : [flags || \"\"];\r\n\r\n                    if ( flags.reduce(( r, flag ) => (r || _flags_states.test(flag)), false) )\r\n                        output.state[id] = this.state[id];\r\n\r\n                    if ( flags.reduce(( r, flag ) => (r || _flags_datas.test(flag)), false) )\r\n                        output.datas[id] = this.datas[id];\r\n                }\r\n            )\r\n        return output;\r\n    }\r\n\r\n    on( lists ) {\r\n        if ( !isString(lists) && lists )\r\n            Object.keys(lists).forEach(k => super.on(k, lists[k]));\r\n        else super.on(...arguments);\r\n    }\r\n\r\n    un( lists ) {\r\n        if ( !isString(lists) && lists )\r\n            Object.keys(lists).forEach(k => super.un(k, lists[k]));\r\n        else super.un(...arguments);\r\n    }\r\n\r\n    /**\r\n     * once('stable', cb)\r\n     * @param obj {React.Component|Store|function)\r\n     * @param key {string} optional key where to map the public state\r\n     */\r\n    then( cb ) {\r\n        if ( this._stable )\r\n            return cb(null, this.datas);\r\n        this.once('stable', e => cb(null, this.datas));\r\n    }\r\n\r\n    restore( {state, datas}, quiet ) {\r\n        let ctx = this.__context;\r\n        Object.keys(datas).forEach(\r\n            id => {\r\n                quiet ?\r\n                ctx.datas = datas[id]\r\n                    :\r\n                ctx.push(datas[id]);\r\n            }\r\n        );\r\n        Object.keys(state).forEach(\r\n            id => {\r\n                quiet ?\r\n                ctx.state = state[id]\r\n                    :\r\n                ctx.setState(state[id]);\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    retain( reason ) {\r\n        this.__retainLocks.all++;\r\n        if ( reason ) {\r\n            this.__retainLocks[reason] = this.__retainLocks[reason] || 0;\r\n            this.__retainLocks[reason]++;\r\n        }\r\n    }\r\n\r\n    dispose( reason ) {\r\n        this.__retainLocks.all--;\r\n        if ( reason ) {\r\n            this.__retainLocks[reason] = this.__retainLocks[reason] || 0;\r\n            this.__retainLocks[reason]--;\r\n        }\r\n        if ( !this.__retainLocks.all )\r\n            this.destroy();\r\n    }\r\n\r\n    wait( reason ) {\r\n        console.log(\"wait\", reason);\r\n        this._stable = false;\r\n        !this.__w8Locks.all && this.emit(\"unstable\", this);\r\n        this.__w8Locks.all++;\r\n        if ( reason ) {\r\n            this.__w8Locks[reason] = this.__w8Locks[reason] || 0;\r\n            this.__w8Locks[reason]++;\r\n        }\r\n    }\r\n\r\n    release( reason ) {\r\n        console.log(\"release\", reason);\r\n        this.__w8Locks.all--;\r\n        if ( reason ) {\r\n            this.__w8Locks[reason] = this.__w8Locks[reason] || 0;\r\n            this.__w8Locks[reason]--;\r\n        }\r\n        this._stable = true;\r\n        if ( !this.__w8Locks.all ) {\r\n            this._stabilizerTM && clearTimeout(this._stabilizerTM);\r\n            this._stabilizerTM = setTimeout(\r\n                e => {\r\n                    if ( !this._stable )\r\n                        return this._stabilizerTM = null;\r\n\r\n                    this.emit(\"stable\", this);\r\n\r\n                    if ( this._followers.length )\r\n                        this._followers.forEach(( {0 : obj, 1 : key, 2 : as, 3 : lastRevs} ) => {\r\n                            let datas = this.getUpdates(lastRevs);\r\n                            if ( !datas ) return;\r\n                            if ( typeof obj != \"function\" ) {\r\n                                if ( as ) obj.setState({[as] : datas});\r\n                                else obj.setState(datas);\r\n                            } else {\r\n                                obj(datas);\r\n                            }\r\n                            lastRevs &&\r\n                            key.forEach(id => (lastRevs[id] = this.__context[id] && this.__context[id]._rev || 0));\r\n                        });\r\n                }\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * order destroy of local stores\r\n     */\r\n    destroy() {\r\n        let ctx = this.__context;\r\n\r\n        Object.keys(\r\n            this.__listening\r\n        ).forEach(\r\n            id => this.__context[id].un(this.__listening[id])\r\n        );\r\n        this.__listening = {};\r\n\r\n        if ( this._isLocalId )\r\n            delete openContexts[this._id];\r\n\r\n        for ( let key in ctx )\r\n            if ( !isFunction(ctx[key]) ) {\r\n                if ( ctx[key].context === ctx )\r\n                    ctx[key].destroy();\r\n\r\n                ctx[key] = ctx[key].constructor;\r\n            }\r\n        if ( this.parent ) {\r\n            this.parent.dispose(\"isMyParent\");\r\n            this.parent.un('stable', this.__parentStableList);\r\n            this.parent.un('unstable', this.__parentUnStableList);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Context.js","/*\r\n * Copyright (c)  2017 Caipi Labs .\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/**\r\n * Ultra scalable state-aware store\r\n *\r\n * @todo : lot of optims...\r\n */\r\n\r\nvar isString     = require('isstring')\r\n    , isArray    = require('isarray')\r\n    , isFunction = require('isfunction')\r\n    ,\r\n    Context      = require('./Context'),\r\n    EventEmitter = require('events'),\r\n    shortid      = require('shortid'),\r\n    objProto     = Object.getPrototypeOf({}),\r\n    openContexts = {};\r\n\r\n\r\nexport default class Store extends EventEmitter {\r\n\r\n    static use                 = [];// overridable list of source stores\r\n    static follow;// overridable list of store that will allow push if updated\r\n    static require;\r\n    static staticContext       = new Context({}, {id : \"static\"});\r\n    static initialState        = undefined;// default state\r\n    static defaultMaxListeners = 20;\r\n    static autokill            = false;// false or tm without followers\r\n\r\n    /**\r\n     * get a Builder-key pair for Store::map\r\n     * @param {string} name\r\n     * @returns {{store: Store, name: *}}\r\n     */\r\n    static as( name ) {\r\n        return {store : this, name};\r\n    }\r\n\r\n    /**\r\n     * Map all named stores in {keys} to the {object}'s state\r\n     * Hook componentWillUnmount (for react comp) or destroy to unBind them automatically\r\n     * @static\r\n     * @param object {React.Component|Store|...} target state aware object\r\n     * @param keys {Array} Ex : [\"session\", \"otherStaticNamedStore:key\", store.as('anotherKey')]\r\n     */\r\n    static map( component, keys, context, origin, setInitial = false ) {\r\n        var targetRevs     = component._revs || {};\r\n        // var targetContext  = component.stores || (component.stores = new Context({}));\r\n        var initialOutputs = {};\r\n        keys               = isArray(keys) ? [...keys] : [keys];\r\n\r\n\r\n        context = context || Store.staticContext;\r\n\r\n        // if (!targetContext.__context)\r\n        //     debugger;\r\n\r\n        keys           = keys.filter(\r\n            // @todo : use query refs\r\n            // (store)(\\.store)*(\\[(\\*|(props)\\w+)+)\\])?(\\:alias)\r\n            ( key ) => {\r\n                if ( !key ) {\r\n                    console.error(\"Not a mappable store item '\" + key + \"' in \" + origin + ' !!');\r\n                    return false;\r\n                }\r\n                let name,\r\n                    alias,\r\n                    store;\r\n                if ( key.store && key.name ) {\r\n                    alias = name = key.name;\r\n                    store = key.store;\r\n                } else if ( isFunction(key) ) {\r\n                    name = alias = key.name || key.defaultName;\r\n                    store = key;\r\n                } else {\r\n                    key   = key.match(/([\\w_]+)(?:\\:\\[(\\*)\\])?(?:\\:(\\*))?/);\r\n                    name  = key[0];\r\n                    store = context.__context[key[0]];\r\n                    alias = key[1] == '*' ? null : key[2] || key[0];// allow binding props  ([*])\r\n                }\r\n\r\n                if ( targetRevs[name] ) return false;// ignore dbl uses for now\r\n                if ( !store ) {\r\n                    console.error(\"Not a mappable store item '\" + name + \"/\" + alias + \"' in \" + origin + ' !!', store);\r\n                    return false;\r\n                } else if ( isFunction(store) ) {\r\n                    this.mountStore(name, context)\r\n\r\n                    context.__context[name].bind(component, alias, setInitial);\r\n                    // if ( context.__context[key[0]].state ) {// do sync push after constructor\r\n                    //     context.__context[key[0]].push();\r\n                    // }\r\n                } else {\r\n                    store.bind(component, alias, setInitial);\r\n                }\r\n                targetRevs[alias] = targetRevs[alias] || true;\r\n                // !targetContext.__context[alias] && targetContext.register({[alias] : context.__context[name]});\r\n                if ( context.__context[name].hasOwnProperty('datas') )\r\n                    initialOutputs[alias] = context.datas[name];\r\n                return true;\r\n            }\r\n        );\r\n        var mixedCWUnmount,\r\n            unMountKey = component.isReactComponent ? \"componentWillUnmount\" : \"destroy\";\r\n\r\n        if ( component.hasOwnProperty(unMountKey) ) {\r\n            mixedCWUnmount = component[unMountKey];\r\n        }\r\n\r\n        component[unMountKey] = function () {// todo hop\r\n            delete this[unMountKey];\r\n            if ( mixedCWUnmount )\r\n                this[unMountKey] = mixedCWUnmount;\r\n            keys.map(\r\n                ( key ) => {\r\n                    let name,\r\n                        alias,\r\n                        store;\r\n                    if ( key.store && key.name ) {\r\n                        alias = name = key.name;\r\n                        store = key.store;\r\n                    } else if ( isFunction(key) ) {\r\n                        name = alias = key.name || key.defaultName;\r\n                        store = context.__context[name];\r\n                    } else {\r\n                        key   = key.split(':');\r\n                        name  = key[0];\r\n                        store = context.__context[key[0]];\r\n                        alias = key[1] || key[0];\r\n                    }\r\n\r\n                    store.unBind(component, alias)\r\n                }\r\n            );\r\n            return this[unMountKey] && this[unMountKey].apply(this, arguments);\r\n        }\r\n\r\n        return initialOutputs;\r\n    }\r\n\r\n    static getContext( contexts ) {\r\n        let skey = isArray(contexts) ? contexts.sort(( a, b ) => {\r\n            if ( a.firstname < b.firstname ) return -1;\r\n            if ( a.firstname > b.firstname ) return 1;\r\n            return 0;\r\n        }).join('::') : contexts;\r\n        return Context.contexts[skey] = Context.contexts[skey] || new Context({}, {id : skey});\r\n    }\r\n\r\n    static mountStore( name, context, store, state, datas ) {\r\n        let ctx, contextMap = context.__context;\r\n        contextMap[name]    = store = store || contextMap[name];\r\n        if ( !store ) {\r\n            console.error(\"Not a mappable store item '\" + name + ' !!', store);\r\n            return false;\r\n        } else if ( isFunction(store) ) {\r\n            //\r\n            if ( store && (store.contexts || store.context) ) {\r\n                ctx = this.getContext(store.contexts || [store.context]);\r\n\r\n                ctx.register({[name] : ctx.__context[name] || store});\r\n                ctx._mount(name);\r\n                return contextMap[name] = ctx[name];\r\n            } else\r\n                store = contextMap[name] = new store(context, {state, datas});\r\n            contextMap[name].relink(name);\r\n        } else {\r\n            if ( state !== undefined && datas === undefined )\r\n                store.setState(state);\r\n            else if ( state !== undefined )\r\n                store.state = state;\r\n\r\n            if ( datas !== undefined )\r\n                store.push(datas);\r\n        }\r\n        return store;\r\n    }\r\n\r\n    /**\r\n     * Constructor, will build a rescope store\r\n     *\r\n     * (context, {require,use,refine,state, datas})\r\n     * (context)\r\n     *\r\n     * @param context {object} context where to find the other stores (default : static staticContext )\r\n     * @param keys {Array} (passed to Store::map) Ex : [\"session\", \"otherNamedStore:key\", otherStore.as(\"otherKey\")]\r\n     */\r\n    constructor() {\r\n        super();\r\n        var argz         = [...arguments],\r\n            _static      = this.constructor,\r\n            context      = !isArray(argz[0]) && !isString(argz[0]) ? argz.shift() : _static.staticContext,\r\n            cfg          = argz[0] && !isArray(argz[0]) && !isString(argz[0]) ? argz.shift() : {},\r\n            name         = isString(argz[0]) ? argz[0] : cfg.name || _static.name,\r\n            watchs       = isArray(argz[0]) ? argz.shift() : cfg.use || [],// watchs need to be defined after all the store are registered : so we can't deal with any \"static use\" automaticly\r\n            refine       = isFunction(argz[0]) ? argz.shift() : cfg.refine || null,\r\n            initialState = _static.initialState\r\n        ;\r\n        this._uid        = cfg._uid || shortid.generate();\r\n        this.setMaxListeners(Store.defaultMaxListeners);\r\n        this.locks        = 0;\r\n        this._onStabilize = [];\r\n\r\n        if ( isString(argz[0]) ) {\r\n            if ( context.__context[name] )\r\n                console.warn(\"ReScope: Overwriting an existing static named store ( %s ) !!\", name);\r\n            context.__context[name] = this;\r\n        }\r\n\r\n        if ( cfg && cfg.on ) {\r\n            this.on(cfg.on);\r\n        }\r\n        // this.state      = this.state || {};\r\n\r\n        this._use = watchs;\r\n        this.name = name;\r\n\r\n        if ( context.stores ) {\r\n            this.contextObj = context;\r\n            this.context    = context.stores;\r\n        } else {\r\n            this.contextObj = new Context(context);\r\n            this.context    = context.stores;\r\n        }\r\n\r\n\r\n        this._stable  = true;\r\n        this._rev     = 1;\r\n        this._revs    = {};\r\n        this.stores   = {};\r\n        this._require = [];\r\n\r\n        if ( _static.require )\r\n            this._require.push(..._static.require);\r\n        if ( cfg.require )\r\n            this._require.push(...cfg.require);\r\n\r\n        this._followers = [];\r\n\r\n        if ( cfg.hasOwnProperty(\"datas\") && cfg.datas !== undefined )\r\n            this.datas = cfg.datas;\r\n        if ( cfg.hasOwnProperty(\"state\") && cfg.state !== undefined )\r\n            initialState = cfg.state;\r\n\r\n        if ( refine )\r\n            this.refine = refine;\r\n\r\n        if ( !!this._use && this._use.length ) {// if there initial watchs anyway\r\n            this.pull(this._use);\r\n        }\r\n\r\n        if ( initialState ) {// sync refine\r\n            this.state = {...initialState};\r\n            if ( this.isComplete() && this.datas === undefined )\r\n                this.datas = this.refine(this.datas, this.state, this.state);\r\n        }\r\n        this._stable = this.datas !== undefined;// stable if it have initial result datas\r\n        !this._stable && this.emit('unstable', this.state);\r\n    }\r\n\r\n    /**\r\n     * Overridable method to know if a state change should be propag to the listening stores & components\r\n     * If static follow is defined, shouldPropag will return true if any of the \"follow\" keys was updated\r\n     * If not it will always return true\r\n     */\r\n    shouldPropag( nDatas ) {\r\n        var _static = this.constructor, r,\r\n            cDatas  = this.datas;\r\n\r\n        // if ( !cState )\r\n        //     return true;\r\n        if ( !cDatas && (!_static.follow || !_static.follow.length ||\r\n                _static.follow && _static.follow.reduce(( r, i ) => (r || nDatas && nDatas[i]), false)) )\r\n            return true;\r\n\r\n        if ( isArray(_static.follow) )\r\n            _static.follow.forEach(\r\n                ( key ) => {\r\n                    r = r || (nDatas ? cDatas[key] !== nDatas[key] : cDatas && cDatas[key])\r\n                }\r\n            );\r\n        else if ( _static.follow === 'strict' )\r\n            r = nDatas === cDatas;\r\n        else {\r\n            cDatas && Object.keys(cDatas).forEach(\r\n                ( key ) => {\r\n                    r = r || (nDatas ? cDatas[key] !== nDatas[key] : cDatas && cDatas[key])\r\n                }\r\n            );\r\n            nDatas && Object.keys(nDatas).forEach(\r\n                ( key ) => {\r\n                    r = r || (nDatas ? cDatas[key] !== nDatas[key] : cDatas && cDatas[key])\r\n                }\r\n            );\r\n        }\r\n\r\n        return !!r;\r\n    }\r\n\r\n    /**\r\n     * Overridable refiner / remapper\r\n     * If state or lastPublicState are simple hash maps refine will return {...datas, ...state}\r\n     * if not it will return the last private state\r\n     * @param datas\r\n     * @param state\r\n     * @returns {*}\r\n     */\r\n    refine( datas, state, changes ) {\r\n        state = state || this.state;\r\n\r\n        if ( !datas || datas.__proto__ !== objProto || state.__proto__ !== objProto )\r\n            return state;\r\n        else\r\n            return {...datas, ...state}\r\n    }\r\n\r\n    /**\r\n     * Debounce this store propagation ( & reducing )\r\n     * @param cb\r\n     */\r\n    stabilize( cb ) {\r\n        var me = this;\r\n        cb && me.once('stable', cb);\r\n        this._stable && this.emit('unstable', this.state, this.datas);\r\n\r\n        me._stable = false;\r\n\r\n        if ( this._stabilizer )\r\n            clearTimeout(this._stabilizer);\r\n\r\n        this._stabilizer = setTimeout(\r\n            this.push.bind(\r\n                this,\r\n                null,\r\n                () => {//@todo\r\n                    // me._stable       = true;\r\n                    this._stabilizer = null;\r\n                    // this.release();\r\n                }\r\n            ));\r\n    }\r\n\r\n    dispatch( event ) {\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * Pull stores in the private state\r\n     * @param stores  {Array} (passed to Store::map) Ex : [\"session\", \"otherNamedStore:key\", otherStore.as(\"otherKey\")]\r\n     */\r\n    pull( stores, doWait, origin ) {\r\n        let initialOutputs = Store.map(this, stores, this.contextObj, origin, true);\r\n        if ( doWait ) {\r\n            this.wait();\r\n            stores.forEach(( s ) => this.context[s] && this.wait(this.context[s]));\r\n            this.release();\r\n        }\r\n        return initialOutputs;\r\n    }\r\n\r\n    /**\r\n     * Apply refine/remap on the private state & push the resulting \"public\" state to followers\r\n     * @param cb\r\n     */\r\n    push( datas, force, cb ) {\r\n        cb            = force === true ? cb : force;\r\n        force         = force === true;\r\n        var i         = 0,\r\n            me        = this,\r\n            nextState = !datas && {...this.state, ...this._changesSW} || this.state,\r\n            nextDatas = datas ||\r\n                (this.isComplete(nextState) ? this.refine(this.datas, nextState, this._changesSW) : this.datas);\r\n\r\n\r\n        this.state = nextState;\r\n        if ( !force &&\r\n            (\r\n                (!this.datas && this.datas === nextDatas) || !this.shouldPropag(nextDatas)\r\n            )\r\n        ) {\r\n            cb && cb();\r\n            return false;\r\n        }\r\n\r\n        this.datas = nextDatas;\r\n        this.locks++;\r\n        this.release(cb);\r\n\r\n    }\r\n\r\n    /**\r\n     * Update the current private state & push it once the store is stable\r\n     * @param pState\r\n     * @param cb\r\n     */\r\n    setState( pState, cb, sync ) {\r\n        var i       = 0, change,\r\n            changes = this._changesSW = this._changesSW || {};\r\n        for ( var k in pState )\r\n            if ( !this.state || pState.hasOwnProperty(k)\r\n                && (\r\n                    pState[k] != this.state[k]\r\n                    ||\r\n                    (this.state[k] && pState[k] && (pState[k]._rev != this._revs[k]))// rev/hash update\r\n                ) ) {\r\n                change        = true;\r\n                this._revs[k] = pState[k] && pState[k]._rev || true;\r\n                changes[k]    = pState[k];\r\n            }\r\n\r\n        if ( sync ) {\r\n            this.push();\r\n            cb && cb();\r\n\r\n        } else {\r\n            if ( change ) {\r\n                this.stabilize(cb);\r\n            } else cb && cb();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update the current private state & push it once the store is stable\r\n     * @param pState\r\n     * @param cb\r\n     */\r\n    setStateSync( pState ) {\r\n        var i       = 0, change,\r\n            changes = this._changesSW = this._changesSW || {};\r\n        for ( var k in pState )\r\n            if ( !this.state || pState.hasOwnProperty(k)\r\n                && (\r\n                    pState[k] != this.state[k]\r\n                    ||\r\n                    (this.state[k] && pState[k] && (pState[k]._rev != this._revs[k]))// rev/hash update\r\n                ) ) {\r\n                change        = true;\r\n                this._revs[k] = pState[k] && pState[k]._rev || true;\r\n                changes[k]    = pState[k];\r\n            }\r\n        this.push();\r\n        return this.datas;\r\n    }\r\n\r\n    /**\r\n     * Replace the current private state & push it once the store is stable\r\n     * @param pState\r\n     * @param cb\r\n     */\r\n    replaceState( pState, cb ) {\r\n        var i      = 0, me = this;\r\n        this.state = pState;\r\n\r\n        this.stabilize(cb);\r\n    }\r\n\r\n    /**\r\n     * get a store-key pair for Store::map\r\n     * @param {string} name\r\n     * @returns {{store: Store, name: *}}\r\n     */\r\n    as( name ) {\r\n        return {store : this, name};\r\n    }\r\n\r\n    on( lists ) {\r\n        if ( !isString(lists) && lists )\r\n            Object.keys(lists).forEach(k => super.on(k, lists[k]));\r\n        else super.on(...arguments);\r\n    }\r\n\r\n    un( lists ) {\r\n        if ( !isString(lists) && lists )\r\n            Object.keys(lists).forEach(k => super.un(k, lists[k]));\r\n        else super.un(...arguments);\r\n    }\r\n\r\n    /**\r\n     * relink bindings & requires\r\n     * @param {string} name\r\n     * @returns {{store: Store, name: *}}\r\n     */\r\n    relink( from ) {\r\n        let context = this.contextObj,\r\n            _static = this.constructor;\r\n        if ( _static.use ) {\r\n            //todo unlink\r\n            this.pull(_static.use, false, from);\r\n        }\r\n\r\n        if ( this._require ) {\r\n            this._require.forEach(\r\n                store => (\r\n                    this.wait(context.__context[store])\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * is complete (all requiered keys are here)\r\n     * @returns bool\r\n     */\r\n    isComplete( state = this.state ) {\r\n        var _static = this.constructor;\r\n        return (\r\n            !this._require\r\n            || !this._require.length\r\n            || state && this._require.reduce(\r\n                ( r, key ) => (r && state[key]),\r\n                true\r\n            )\r\n        );\r\n    }\r\n\r\n    /**\r\n     * is stable\r\n     * @returns bool\r\n     */\r\n    isStable() {\r\n        return this._stable;\r\n    }\r\n\r\n    /**\r\n     * Un bind this store off the given component-key\r\n     * @param obj\r\n     * @param key\r\n     * @returns {Array.<*>}\r\n     */\r\n    unBind( obj, key ) {\r\n        var followers = this._followers,\r\n            i         = followers && followers.length;\r\n        while (followers && i--)\r\n            if ( followers[i][0] == obj && followers[i][1] == key )\r\n                return followers.splice(i, 1);\r\n    }\r\n\r\n    /**\r\n     * Bind this store changes to the given component-key\r\n     * @param obj {React.Component|Store|function)\r\n     * @param key {string} optional key where to map the public state\r\n     */\r\n    bind( obj, key, setInitial = true ) {\r\n        this._followers.push([obj, key]);\r\n        if ( setInitial && this.datas && this._stable ) {\r\n            if ( typeof obj != \"function\" ) {\r\n                if ( key ) obj.setState({[key] : this.datas});\r\n                else obj.setState(this.datas);\r\n            } else {\r\n                obj(this.datas);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * once('stable', cb)\r\n     * @param obj {React.Component|Store|function)\r\n     * @param key {string} optional key where to map the public state\r\n     */\r\n    then( cb ) {\r\n        if ( this._stable )\r\n            return cb(null, this.datas);\r\n        this.once('stable', e => cb(null, this.datas));\r\n    }\r\n\r\n    /**\r\n     * Add a lock so the store will not propag it state untill release() is call\r\n     * @param previous {Store|number|Array} @optional wf to wait, releases to wait or array of stuff to wait\r\n     * @returns {TaskFlow}\r\n     */\r\n    wait( previous ) {\r\n        if ( typeof previous == \"number\" )\r\n            return this.locks += previous;\r\n        if ( isArray(previous) )\r\n            return previous.map(this.wait.bind(this));\r\n\r\n        this._stable && this.emit('unstable', this.state, this.datas);\r\n        this._stable = false;\r\n        this.locks++;\r\n        if ( previous && isFunction(previous.then) ) {\r\n            previous.then(this.release.bind(this, null));\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Decrease locks for this store, if it reach 0 & it have a public state,\r\n     * it will be propagated to the followers,\r\n     * then, all stuff passed to \"then\" call back will be exec / released\r\n     * @param desync\r\n     * @returns {*}\r\n     */\r\n    release( cb ) {\r\n        var _static = this.constructor;\r\n        let i       = 0;\r\n\r\n        if ( !--this.locks && this.datas && this.isComplete() ) {\r\n            this._stable = true;\r\n\r\n\r\n            this._rev = 1 + (this._rev + 1) % 1000000;//\r\n            if ( this._followers.length )\r\n                this._followers.forEach(( follower ) => {\r\n                    if ( !this.datas ) return;\r\n                    if ( typeof follower[0] == \"function\" ) {\r\n                        follower[0](this.datas);\r\n                    } else {\r\n                        // cb && i++;\r\n                        follower[0].setState(\r\n                            (follower[1]) ?\r\n                            {[follower[1]] : this.datas}\r\n                                :\r\n                            this.datas\r\n                            // ,\r\n                            // cb && (\r\n                            //     () => (!(--i) && cb())\r\n                            // )\r\n                        );\r\n                    }\r\n                });\r\n\r\n            this.emit('stable', this.datas);\r\n            cb && cb()\r\n        } else cb && this.then(cb);\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n\r\n        this.emit('destroy', this);\r\n        if ( this._stabilizer )\r\n            clearTimeout(this._stabilizer);\r\n        this._followers.length = 0;\r\n        this.dead              = true;\r\n        if ( this.name && this.context[this.name] === this )\r\n            this.context[this.name] = this.constructor;\r\n        this._revs = this.datas = this.state = this.context = null;\r\n        this.removeAllListeners();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Store.js",";(function (factory) {\n  if (typeof define === 'function' && define.amd)\n    define([], factory);\n  else if (typeof exports === 'object' && !!exports && !exports.nodeType)\n    if (typeof module === 'object' && !!module && module.exports)\n      module.exports = factory();\n    else\n      exports['default'] = factory();\n  else if (typeof YUI === 'function' && YUI.add)\n    YUI.add('is-string', function (Y) { Y['default'] = factory(); }, '1.0.7');\n  else\n    String.isString = factory();\n})(function () {\n  var strToString  = ('').toString,\n      hasBind      = Function.prototype && Function.prototype.bind,\n      strToStrCall = hasBind && strToString.call.bind(strToString),\n      isString     = function (str) {\n        /*@cc_on\n          @if (@_jscript_version >= 5) @*/\n            try {\n                hasBind ? strToStrCall(str) : strToString.call(str);\n                return true;\n            } catch (e) {\n                return false;\n            }\n          /*@end\n        @*/\n      };\n\n  return function (str) {\n    return  typeof str === 'string' ||\n            str && typeof str === 'object' &&\n            /*@cc_on\n              @if (@_jscript_version < 5.5)\n                /^\\s*function\\s*String\\(\\)\\s*{\\s*\\[native code\\]\\s*}\\s*$/.test(str.constructor)\n              @else @*/\n                isString(str)\n              /*@end\n            @*/\n            || false;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isstring/isString.umd.js\n// module id = 3\n// module chunks = 0","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isarray/index.js\n// module id = 4\n// module chunks = 0","// if (typeof require !== 'undefined') {}\n\nvar isFunction = function (functionToCheck) {\n\tvar getType = {};\n\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = isFunction;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isfunction/lib/main.js\n// module id = 5\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 6\n// module chunks = 0","'use strict';\nmodule.exports = require('./lib/index');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/index.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nvar alphabet = require('./alphabet');\nvar encode = require('./encode');\nvar decode = require('./decode');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode;\nmodule.exports.isValid = isValid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/index.js\n// module id = 8\n// module chunks = 0","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nmodule.exports = {\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/alphabet.js\n// module id = 9\n// module chunks = 0","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/random/random-from-seed.js\n// module id = 10\n// module chunks = 0","'use strict';\n\nvar randomByte = require('./random/random-byte');\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByte() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = encode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/encode.js\n// module id = 11\n// module chunks = 0","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nmodule.exports = randomByte;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/random/random-byte-browser.js\n// module id = 12\n// module chunks = 0","'use strict';\nvar alphabet = require('./alphabet');\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nmodule.exports = decode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/decode.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/build.js\n// module id = 14\n// module chunks = 0","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nmodule.exports = isShortId;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/is-valid.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nmodule.exports = 0;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/shortid/lib/util/cluster-worker-id-browser.js\n// module id = 16\n// module chunks = 0"],"sourceRoot":""}
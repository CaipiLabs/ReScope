<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Really basic drafty vanilla JS example</title>
    <script src="./NewsListComp.js"></script>
</head>
<body>
<h1>Really basic drafty vanilla JS example</h1>

<div style="border: solid 1px lightgrey;border-radius: 3px">
    <b><u>
        <button onclick="context.appState.setState({currentUserId:'MissTick'})">MissTick events</button>
    </u></b>
    <b><u>
        <button onclick="context.appState.setState({currentUserId:'MrNice'})">MrNice events</button>
    </u></b>
</div>
<pre id="status">Preloading...</pre>
<div id="events"></div>
<script>
    var context = window.context = new StoreContext(),
        NewsList = new NewsListComp(document.getElementById("events")),
        rescope  = new Rescope(context);

    // you can add/override some store to this context
    (new rescope.Store("status")).setState({hooked : "this store was replaced"})


    rescope.fetch(
        function ( err, state, context ) {
            context.status.bind(
                ( datas ) => {
                    document.getElementById("status").innerHTML =
                        JSON.stringify(datas, null, 2);
                }
            );

            rescope(NewsList, 'userEvents', true);
        }
    );
</script>
</body>
</html>